/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"app": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/js/app.js","vendor"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/contentWidget.css":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss!./src/css/contentWidget.css ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, \".cvk-ContentWidget {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 1px;\\n  background: white;\\n  /* There may be a way to write just one of these things and postcss/autoprefix does the rest.\\n    Anyway, depending on if we use a DockPanel, Lumino will override this with the real value\\n    in px (but we need to define an initial behaviour + in case we use a BoxPanel instead of DockPanel). */\\n  height: -webkit-fill-available;\\n  height: -moz-available;\\n  height: stretch;\\n  height: 100%;\\n}\\n\\n.cvk-ContentWidget > div {\\nflex: 1 1 auto;\\noverflow: auto;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack:///./src/css/contentWidget.css?./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/legend.css":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss!./src/css/legend.css ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, \"div.ol-legend.ol-unselectable.ol-control {\\n  padding-top: 10px;\\n}\\n\\ndiv.ol-legend.ol-unselectable.ol-control.ol-collapsed {\\n  padding-top: 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack:///./src/css/legend.css?./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/mapWidget.css":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss!./src/css/mapWidget.css ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, \"img.olTileImage {\\n    max-width: none;\\n}\\n\\n.cvk-MapWidget {\\n  background: white;\\n  border: 1px solid rgb(192, 192, 192);\\n}\\n\\n/*\\n.container-map {\\n  position: relative;\\n  flex: 1 1 70%;\\n  flex-flow: row nowrap;\\n  display: contents;\\n}\\n*/\\n\\n.ol-map {\\n  width: 100%;\\n  height: 100%;\\n  /* height: 0; */\\n  position:absolute;\\n  top:0;\\n  left:0;\\n}\\n\\n/*\\n.ol-map.active {\\n  height: 100% !important;\\n}\\n\\n.container-map.active > .ol-map{\\n  height: 100% !important;\\n}\\n*/\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack:///./src/css/mapWidget.css?./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/popup.css":
/*!************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss!./src/css/popup.css ***!
  \************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, \".ol-popup {\\n  position: absolute;\\n  background-color: white;\\n  box-shadow: 0 1px 4px rgba(0,0,0,0.2);\\n  padding: 15px;\\n  border-radius: 10px;\\n  border: 1px solid #cccccc;\\n  bottom: 12px;\\n  left: -50px;\\n  min-width: 400px;\\n}\\n.ol-popup:after, .ol-popup:before {\\n  top: 100%;\\n  border: solid transparent;\\n  content: \\\" \\\";\\n  height: 0;\\n  width: 0;\\n  position: absolute;\\n  pointer-events: none;\\n}\\n.ol-popup:after {\\n  border-top-color: white;\\n  border-width: 10px;\\n  left: 48px;\\n  margin-left: -10px;\\n}\\n.ol-popup:before {\\n  border-top-color: #cccccc;\\n  border-width: 11px;\\n  left: 48px;\\n  margin-left: -11px;\\n}\\n.ol-popup-closer {\\n  text-decoration: none;\\n  position: absolute;\\n  top: 2px;\\n  right: 8px;\\n}\\n.ol-popup-closer:after {\\n  content: \\\"✖\\\";\\n}\\n\\n.ol-popup #popup-content {\\n  margin-top: 5px;\\n}\\n\\n.ol-popup table.table-info {\\n  border-spacing: 1px;\\n  border-radius: 6px;\\n  border: solid 1px gray;\\n}\\n\\n.ol-popup table.table-info td {\\n  vertical-align: top;\\n  min-width: 100px;\\n  max-width: 320px;\\n  color: black;\\n  height: 17px;\\n  padding: 3px;\\n}\\n\\n.ol-popup table.table-info > tbody > tr:nth-child(even) {\\n  background: #edf2f3;\\n}\\n\\n.ol-popup table.table-info > tbody > tr:nth-child(odd) {\\n  background: #ffffff;\\n}\\n\\n.ol-popup table.table-info td.field-name {\\n  color: #535050;\\n  padding-right: 7px;\\n  font-weight: normal;\\n  min-width: 60px;\\n  max-width: 260px;\\n}\\n\\n.ol-popup table.table-info .field-value {\\n  outline: none;\\n  word-wrap: break-word;\\n}\\n\\n.ol-popup table a {\\n  color: #025a86;\\n  text-decoration: none;\\n}\\n\\n.ol-popup .uri-feature {\\n  font-size: 14px;\\n  text-align: center;\\n  margin: 3px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack:///./src/css/popup.css?./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/styles.css":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss!./src/css/styles.css ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_0___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!@lumino/default-theme/style/index.css */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/@lumino/default-theme/style/index.css\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\nexports.push([module.i, \"html {\\n  box-sizing: border-box;\\n  display: block;\\n}\\n\\nbody {\\n  display: flex;\\n  flex-direction: column;\\n  position: absolute;\\n  margin: 0;\\n  padding: 0;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgb(189, 189, 189);\\n}\\n\\n/* The BoxPanel on which the elements are added */\\n#main {\\n  flex: 1 1 auto;\\n  height: calc(100% - 5px);\\n  margin-left: 2px;\\n  margin-right: 2px;\\n}\\n\\n/* Style for the small tabs of dockpanel containing the widget title */\\n.p-TabBar-tab, .lm-TabBar-tab {\\n  flex: 0 1 225px !important;\\n  border-top-right-radius: 3% 27%;\\n  border-top-left-radius: 3% 27%;\\n}\\n\\n/* Style for the dockpanel that may contains map and other widgets */\\n#map-terrain-container {\\n  width: 100%;\\n  flex: 1 1 auto;\\n}\\n\\n\\n/* Some relief on the tabBar content */\\nul.lm-TabBar-content.p-TabBar-content > li[aria-selected=true] {\\n  box-shadow: grey 2px 1px 0px 0px;\\n}\\n\\nul.lm-TabBar-content.p-TabBar-content > li[aria-selected=false] {\\n  box-shadow: grey 0px 0px 1px 0px;\\n}\\n\\n/* Handlebar between widgets in DockPanel */\\ndiv[data-orientation=\\\"vertical\\\"].lm-DockPanel-handle.p-DockPanel-handle {\\n  background: rgb(147, 147, 147);\\n  box-shadow: rgb(103 58 183) 0px 0.5px 0.5px 0px;\\n  height: 2px !important;\\n}\\n\\ndiv[data-orientation=\\\"horizontal\\\"].lm-DockPanel-handle.p-DockPanel-handle {\\n  background: rgb(147, 147, 147);\\n  box-shadow: rgb(103 58 183) 0.5px 0px 0.5px 0px;\\n  width: 2px !important;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack:///./src/css/styles.css?./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??postcss");

/***/ }),

/***/ "./src/css/contentWidget.css":
/*!***********************************!*\
  !*** ./src/css/contentWidget.css ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!../../node_modules/postcss-loader/src??postcss!./contentWidget.css */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/contentWidget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack:///./src/css/contentWidget.css?");

/***/ }),

/***/ "./src/css/legend.css":
/*!****************************!*\
  !*** ./src/css/legend.css ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!../../node_modules/postcss-loader/src??postcss!./legend.css */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/legend.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack:///./src/css/legend.css?");

/***/ }),

/***/ "./src/css/mapWidget.css":
/*!*******************************!*\
  !*** ./src/css/mapWidget.css ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!../../node_modules/postcss-loader/src??postcss!./mapWidget.css */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/mapWidget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack:///./src/css/mapWidget.css?");

/***/ }),

/***/ "./src/css/popup.css":
/*!***************************!*\
  !*** ./src/css/popup.css ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!../../node_modules/postcss-loader/src??postcss!./popup.css */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/popup.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack:///./src/css/popup.css?");

/***/ }),

/***/ "./src/css/styles.css":
/*!****************************!*\
  !*** ./src/css/styles.css ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!../../node_modules/postcss-loader/src??postcss!./styles.css */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./src/css/styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack:///./src/css/styles.css?");

/***/ }),

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global, Promise) {/* harmony import */ var _css_styles_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/styles.css */ \"./src/css/styles.css\");\n/* harmony import */ var _css_styles_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_styles_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ol_ol_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/ol.css */ \"./node_modules/ol/ol.css\");\n/* harmony import */ var ol_ol_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ol_ol_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var ol_ext_dist_ol_ext_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol-ext/dist/ol-ext.css */ \"./node_modules/ol-ext/dist/ol-ext.css\");\n/* harmony import */ var ol_ext_dist_ol_ext_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ol_ext_dist_ol_ext_css__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lumino/widgets */ \"./node_modules/@lumino/widgets/dist/index.es6.js\");\n/* harmony import */ var _lumino_messaging__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lumino/messaging */ \"./node_modules/@lumino/messaging/dist/index.es6.js\");\n/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./consts */ \"./src/js/consts.js\");\n/* harmony import */ var _interactions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./interactions */ \"./src/js/interactions.js\");\n/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./queries */ \"./src/js/queries.js\");\n/* harmony import */ var _legend__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./legend */ \"./src/js/legend.js\");\n/* harmony import */ var _utils_map__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/map */ \"./src/js/utils/map.js\");\n/* harmony import */ var _widgets_contentWidget__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./widgets/contentWidget */ \"./src/js/widgets/contentWidget.js\");\n/* harmony import */ var _widgets_mapWidgetOpenLayers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./widgets/mapWidgetOpenLayers */ \"./src/js/widgets/mapWidgetOpenLayers.js\");\n/* harmony import */ var _widgets_tableWidget__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./widgets/tableWidget */ \"./src/js/widgets/tableWidget.js\");\n/* harmony import */ var _widgets_terrainWidgetOpenglobus__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./widgets/terrainWidgetOpenglobus */ \"./src/js/widgets/terrainWidgetOpenglobus.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./helpers */ \"./src/js/helpers.js\");\n/* harmony import */ var _utils_widget__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/widget */ \"./src/js/utils/widget.js\");\n/* harmony import */ var _utils_terrain__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/terrain */ \"./src/js/utils/terrain.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nglobal.State = {\n  maps: [],\n  // An array of all the map components\n  terrains: [],\n  // An array of all the terrain components\n  tables: [],\n  // An array of all the table components\n  others: [],\n  // An array of other components, in their own container (i.e not legend / popup)\n  interactions: {} // A mapping id > interaction object for all the interactions encountered\n\n};\n\nconst onload = async () => {\n  // We use Lumino.js containers / widgets in order to obtain resizable boxes\n  // for element we put in it as well as messaging and some other stuffs.\n  //\n  // This is the main container for any stuff in the application\n  // It doesn't allow resizing in itself\n  const main = new _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__[\"BoxPanel\"]({\n    direction: 'left-to-right',\n    spacing: 0\n  });\n  main.id = 'main'; // TODO:\n  // 1. make the request to know what are the component of the application                         X\n  // 2. decide if we need a SplitPanel or DockPanel (multiple maps or map(s) + table(s))\n  //     or just a BoxPanel\n  //     (and use ResizableSplitContainer or FixedContainer which\n  //      should offer same interface for parent / child components)\n  // 3. make the necessary request for each component and dispose the\n  //    corresponding widgets on component from step 2                                             X\n  // 4. bind interactions                                                                          X\n  // 5. broadcast message saying that everything is disposed                                       X\n  // 6. this message may finalize stuff in our components/widgets\n  //    (such as zooming on the requested initial extent on maps)                                  X\n\n  window.onresize = () => {\n    main.update();\n  };\n\n  _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__[\"Widget\"].attach(main, document.body); // Get information about the \"GeoVisualApplication\" and its component in the KB\n  // in order to create them\n\n  const gva_context_results = (await Object(_queries__WEBPACK_IMPORTED_MODULE_7__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_5__[\"QUERY_URL\"], _queries__WEBPACK_IMPORTED_MODULE_7__[\"queryContextGVA\"])).results.bindings;\n\n  if (!gva_context_results.length) {\n    throw new Error('No results found. Is the requested graph the right one? Is there a gviz:GeoVisualApplication as well as GeoVisualComponents declared ?');\n  } // Transform the result of the sparql query to an easier to use\n  // description, ready to be used to create the various components\n\n\n  const description = Object(_helpers__WEBPACK_IMPORTED_MODULE_14__[\"responseToApplicationDescription\"])(gva_context_results); // Maybe there is a title to be used for this gviz:GeoVisualApplication..\n\n  if (description.app.title) {\n    document.title = description.app.title;\n  } // This is the container in which we put the various components.\n  // We use a BoxPanel if there is only one component otherwise\n  // a DockPanel that allow to have resizable widgets in tabs (with title)\n\n\n  const map_terrain_container = description.components.length > 1 ? new _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__[\"DockPanel\"]() : new _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__[\"BoxPanel\"]();\n  map_terrain_container.id = 'map-terrain-container';\n  main.addWidget(map_terrain_container);\n  console.log(map_terrain_container); // Loop over the components to create them in the appropriate order..\n\n  await Promise.all(description.components.map(async componentParams => {\n    if (componentParams.type === 'http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#Map2dComponent') {\n      const mapWidget = new _widgets_mapWidgetOpenLayers__WEBPACK_IMPORTED_MODULE_11__[\"default\"](componentParams);\n\n      if (description.components.length === 1 && description.components[0].width) {\n        mapWidget.setMaxSize();\n      }\n\n      const lastWidget = Object(_utils_widget__WEBPACK_IMPORTED_MODULE_15__[\"getLastWidget\"])(map_terrain_container);\n      map_terrain_container.addWidget(mapWidget, {\n        mode: 'split-right',\n        ref: lastWidget\n      });\n      const map = mapWidget.olMap;\n      const iriMap = componentParams.iri; // Get information about the GeoVisualIntermediateRepresentation in the KB\n      // regarding this Map2dComponent\n\n      const gvr_results = (await Object(_queries__WEBPACK_IMPORTED_MODULE_7__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_5__[\"QUERY_URL\"], Object(_queries__WEBPACK_IMPORTED_MODULE_7__[\"makeQueryPortrayal\"])(iriMap))).results.bindings;\n      const portrayals = Object(_utils_map__WEBPACK_IMPORTED_MODULE_9__[\"makeMapLayersAndPortrayals\"])(gvr_results, mapWidget); // For debugging purpose:\n      //   - the result from the sparql endpoint\n      //   - an array of \"portrayal\", each will be converted to a layer\n      //   - the ol.Map object on which these layers will be added\n\n      console.log(gvr_results, portrayals, map); // Do we need to build a legend ?\n\n      const result_legend = (await Object(_queries__WEBPACK_IMPORTED_MODULE_7__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_5__[\"QUERY_URL\"], Object(_queries__WEBPACK_IMPORTED_MODULE_7__[\"makeQueryLegend\"])(iriMap))).results.bindings;\n\n      if (result_legend.length) {\n        // There is a legend linked to this map\n        Object(_legend__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(map, gvr_results, portrayals);\n      } // the fact that it allows interaction(s) is verified later\n\n\n      Object(_interactions__WEBPACK_IMPORTED_MODULE_6__[\"bindMapInteractions\"])(mapWidget);\n      global.State.maps.push(mapWidget);\n    } else if (componentParams.type === 'http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#TableComponent') {\n      const dataTable = await Object(_helpers__WEBPACK_IMPORTED_MODULE_14__[\"sparqlRequestToTableData\"])(componentParams.iri);\n      const tableWidget = new _widgets_tableWidget__WEBPACK_IMPORTED_MODULE_12__[\"default\"](dataTable);\n      map_terrain_container.addWidget(tableWidget, {\n        mode: 'split-bottom'\n      });\n      global.State.tables.push(tableWidget);\n    } else if (componentParams.type === 'http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#StaticContentComponent') {\n      const data = await Object(_helpers__WEBPACK_IMPORTED_MODULE_14__[\"sparqlQueryToContentWidgetData\"])(componentParams.iri);\n      const contentWidget = new _widgets_contentWidget__WEBPACK_IMPORTED_MODULE_10__[\"default\"](data);\n      const lastWidget = Object(_utils_widget__WEBPACK_IMPORTED_MODULE_15__[\"getLastWidget\"])(map_terrain_container);\n      map_terrain_container.addWidget(contentWidget, {\n        mode: 'split-right',\n        ref: lastWidget\n      });\n      global.State.others.push(contentWidget);\n    } else if (componentParams.type === 'http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#Map3dComponent') {\n      const terrainWidget = new _widgets_terrainWidgetOpenglobus__WEBPACK_IMPORTED_MODULE_13__[\"default\"](componentParams);\n      const iriComponent = componentParams.iri; // Get information about the GeoVisualIntermediateRepresentation in the KB\n      // regarding this Map3dComponent\n\n      const gvr_results = (await Object(_queries__WEBPACK_IMPORTED_MODULE_7__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_5__[\"QUERY_URL\"], Object(_queries__WEBPACK_IMPORTED_MODULE_7__[\"makeQueryPortrayal\"])(iriComponent))).results.bindings;\n      const lastWidget = Object(_utils_widget__WEBPACK_IMPORTED_MODULE_15__[\"getLastWidget\"])(map_terrain_container);\n      map_terrain_container.addWidget(terrainWidget, {\n        mode: 'split-bottom',\n        ref: lastWidget\n      });\n      const portrayals = Object(_utils_terrain__WEBPACK_IMPORTED_MODULE_16__[\"makeTerrainLayersAndPortrayals\"])(gvr_results, terrainWidget);\n      console.log(portrayals);\n      global.State.terrains.push(terrainWidget);\n      Object(_interactions__WEBPACK_IMPORTED_MODULE_6__[\"bindTerrainInteractions\"])(terrainWidget);\n    }\n  })); // Handle synchronisation between maps...\n\n  Object(_utils_map__WEBPACK_IMPORTED_MODULE_9__[\"handleMapSynchronisation\"])(global.State.maps, description.components); // Send a message saying that all widgets are attached...\n  // TODO: use a signal instead...\n\n  const message = new _lumino_messaging__WEBPACK_IMPORTED_MODULE_4__[\"Message\"]('all-widgets-attached');\n  [].concat(global.State.maps, global.State.terrains).forEach(component => {\n    _lumino_messaging__WEBPACK_IMPORTED_MODULE_4__[\"MessageLoop\"].sendMessage(component, message);\n  }); // Just so that we remember and maybe use it later...\n\n  global.State.description = description;\n};\n\nwindow.onload = onload;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! bluebird */ \"./node_modules/bluebird/js/browser/bluebird.js\")))\n\n//# sourceURL=webpack:///./src/js/app.js?");

/***/ }),

/***/ "./src/js/consts.js":
/*!**************************!*\
  !*** ./src/js/consts.js ***!
  \**************************/
/*! exports provided: QUERY_URL, UPDATE_URL, NS_SYMBOLIZER, NS_GRAPHIC, NS_CONTEXT, NS_GEOVIZ, DOTS_PER_INCH, INCHES_PER_UNIT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QUERY_URL\", function() { return QUERY_URL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UPDATE_URL\", function() { return UPDATE_URL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NS_SYMBOLIZER\", function() { return NS_SYMBOLIZER; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NS_GRAPHIC\", function() { return NS_GRAPHIC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NS_CONTEXT\", function() { return NS_CONTEXT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NS_GEOVIZ\", function() { return NS_GEOVIZ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOTS_PER_INCH\", function() { return DOTS_PER_INCH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"INCHES_PER_UNIT\", function() { return INCHES_PER_UNIT; });\n// We declare a few constants, from the URL of the endpoint\n// to the namespaces that we're going to handle in JS code\nconst QUERY_URL = `${window.location.origin}/CoViKoa/query`;\nconst UPDATE_URL = `${window.location.origin}/CoViKoa/update`;\nconst NS_SYMBOLIZER = 'https://gis.lu.se/ont/data_portrayal/symbolizer#';\nconst NS_GRAPHIC = 'https://gis.lu.se/ont/data_portrayal/graphic#';\nconst NS_CONTEXT = 'http://lig-tdcge.imag.fr/steamer/covikoa/context#';\nconst NS_GEOVIZ = 'http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#';\nconst DOTS_PER_INCH = 72;\nconst METERS_PER_INCH = 0.02540005080010160020;\nconst INCHES_PER_UNIT = {\n  inches: 1.0,\n  in: 1.0,\n  Inch: 1.0,\n  ft: 12.0,\n  mi: 63360.0,\n  m: 39.3701,\n  dd: 4374754,\n  yd: 36,\n  d: 4374754,\n  degrees: 4374754,\n  nmi: 1852 * 39.3701,\n  Meter: 1.0 / METERS_PER_INCH,\n  // EPSG:9001\n  Foot: 0.30480060960121920243 / METERS_PER_INCH,\n  // EPSG:9003\n  IFoot: 0.30480000000000000000 / METERS_PER_INCH,\n  // EPSG:9002\n  ClarkeFoot: 0.3047972651151 / METERS_PER_INCH,\n  // EPSG:9005\n  SearsFoot: 0.30479947153867624624 / METERS_PER_INCH,\n  // EPSG:9041\n  GoldCoastFoot: 0.30479971018150881758 / METERS_PER_INCH,\n  // EPSG:9094\n  IInch: 0.02540000000000000000 / METERS_PER_INCH,\n  MicroInch: 0.00002540000000000000 / METERS_PER_INCH,\n  Mil: 0.00000002540000000000 / METERS_PER_INCH,\n  Centimeter: 0.01000000000000000000 / METERS_PER_INCH,\n  Kilometer: 1000.00000000000000000000 / METERS_PER_INCH,\n  // EPSG:9036\n  Yard: 0.91440182880365760731 / METERS_PER_INCH,\n  SearsYard: 0.914398414616029 / METERS_PER_INCH,\n  // EPSG:9040\n  IndianYard: 0.91439853074444079983 / METERS_PER_INCH,\n  // EPSG:9084\n  IndianYd37: 0.91439523 / METERS_PER_INCH,\n  // EPSG:9085\n  IndianYd62: 0.9143988 / METERS_PER_INCH,\n  // EPSG:9086\n  IndianYd75: 0.9143985 / METERS_PER_INCH,\n  // EPSG:9087\n  IndianFoot: 0.30479951 / METERS_PER_INCH,\n  // EPSG:9080\n  IndianFt37: 0.30479841 / METERS_PER_INCH,\n  // EPSG:9081\n  IndianFt62: 0.3047996 / METERS_PER_INCH,\n  // EPSG:9082\n  IndianFt75: 0.3047995 / METERS_PER_INCH,\n  // EPSG:9083\n  Mile: 1609.34721869443738887477 / METERS_PER_INCH,\n  IYard: 0.91440000000000000000 / METERS_PER_INCH,\n  // EPSG:9096\n  IMile: 1609.34400000000000000000 / METERS_PER_INCH,\n  // EPSG:9093\n  NautM: 1852.00000000000000000000 / METERS_PER_INCH,\n  // EPSG:9030\n  'Lat-66': 110943.316488932731 / METERS_PER_INCH,\n  'Lat-83': 110946.25736872234125 / METERS_PER_INCH,\n  Decimeter: 0.10000000000000000000 / METERS_PER_INCH,\n  Millimeter: 0.00100000000000000000 / METERS_PER_INCH,\n  Dekameter: 10.00000000000000000000 / METERS_PER_INCH,\n  Decameter: 10.00000000000000000000 / METERS_PER_INCH,\n  Hectometer: 100.00000000000000000000 / METERS_PER_INCH,\n  GermanMeter: 1.0000135965 / METERS_PER_INCH,\n  // EPSG:9031\n  CaGrid: 0.999738 / METERS_PER_INCH,\n  ClarkeChain: 20.1166194976 / METERS_PER_INCH,\n  // EPSG:9038\n  GunterChain: 20.11684023368047 / METERS_PER_INCH,\n  // EPSG:9033\n  BenoitChain: 20.116782494375872 / METERS_PER_INCH,\n  // EPSG:9062\n  SearsChain: 20.11676512155 / METERS_PER_INCH,\n  // EPSG:9042\n  ClarkeLink: 0.201166194976 / METERS_PER_INCH,\n  // EPSG:9039\n  GunterLink: 0.2011684023368047 / METERS_PER_INCH,\n  // EPSG:9034\n  BenoitLink: 0.20116782494375872 / METERS_PER_INCH,\n  // EPSG:9063\n  SearsLink: 0.2011676512155 / METERS_PER_INCH,\n  // EPSG:9043\n  Rod: 5.02921005842012 / METERS_PER_INCH,\n  IntnlChain: 20.1168 / METERS_PER_INCH,\n  // EPSG:9097\n  IntnlLink: 0.201168 / METERS_PER_INCH,\n  // EPSG:9098\n  Perch: 5.02921005842012 / METERS_PER_INCH,\n  Pole: 5.02921005842012 / METERS_PER_INCH,\n  Furlong: 201.1684023368046 / METERS_PER_INCH,\n  Rood: 3.778266898 / METERS_PER_INCH,\n  CapeFoot: 0.3047972615 / METERS_PER_INCH,\n  Brealey: 375.00000000000000000000 / METERS_PER_INCH,\n  ModAmFt: 0.304812252984505969011938 / METERS_PER_INCH,\n  Fathom: 1.8288 / METERS_PER_INCH,\n  'NautM-UK': 1853.184 / METERS_PER_INCH,\n  '50kilometers': 50000.0 / METERS_PER_INCH,\n  '150kilometers': 150000.0 / METERS_PER_INCH,\n  mm: 1.0 / METERS_PER_INCH / 1000.0,\n  cm: 1.0 / METERS_PER_INCH / 100.0,\n  dm: 1.0 / METERS_PER_INCH * 100.0,\n  km: 1.0 / METERS_PER_INCH * 1000.0,\n  kmi: 1852 * 39.3701,\n  // International Nautical Mile\n  fath: 1.8288 / METERS_PER_INCH,\n  // International Fathom\n  ch: 20.1168 / METERS_PER_INCH,\n  // International Chain\n  link: 0.201168 / METERS_PER_INCH,\n  // International Link\n  'us-in': 1.0,\n  // U.S. Surveyor's Inch\n  'us-ft': 0.30480060960121920243 / METERS_PER_INCH,\n  // U.S. Surveyor's Foot\n  'us-yd': 0.91440182880365760731 / METERS_PER_INCH,\n  // U.S. Surveyor's Yard\n  'us-ch': 20.11684023368047 / METERS_PER_INCH,\n  // U.S. Surveyor's Chain\n  'us-mi': 1609.34721869443738887477 / METERS_PER_INCH,\n  // U.S. Surveyor's Statute Mile\n  'ind-yd': 0.91439523 / METERS_PER_INCH,\n  // Indian Yard\n  'ind-ft': 0.30479841 / METERS_PER_INCH,\n  // Indian Foot\n  'ind-ch': 20.11669506 / METERS_PER_INCH // Indian Chain,\n\n};\n\n//# sourceURL=webpack:///./src/js/consts.js?");

/***/ }),

/***/ "./src/js/customMouseHandler.js":
/*!**************************************!*\
  !*** ./src/js/customMouseHandler.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CustomMouseHandler; });\n/* harmony import */ var _lumino_datagrid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lumino/datagrid */ \"./node_modules/@lumino/datagrid/dist/index.es6.js\");\n/* harmony import */ var ol_layer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/layer */ \"./node_modules/ol/layer.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers */ \"./src/js/helpers.js\");\n/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/style */ \"./node_modules/ol/style.js\");\n\n\n\n\n/**\n* This is the custom MouseHandler for the DataGrid that allows to\n* register/trigger interactions on our TableWidget.\n*\n*/\n\nclass CustomMouseHandler extends _lumino_datagrid__WEBPACK_IMPORTED_MODULE_0__[\"BasicMouseHandler\"] {\n  constructor()\n  /* grid */\n  {\n    // eslint-disable-line no-useless-constructor\n    super(); // this._grid = grid;\n  }\n\n  onMouseDown(grid, event) {\n    const hit = grid.hitTest(event.clientX, event.clientY); // see grid.dataModel.data(region, row, column) which might be safer (regarding to reordering)\n    // to get a single value\n\n    let idFeatureClicked; // we dont allow to reorder the table for now...\n\n    let feature;\n\n    if (hit.region === 'row-header') {\n      idFeatureClicked = hit.row;\n    } else if (hit.region === 'body') {\n      idFeatureClicked = hit.row;\n    } // Find the corresponding feature on the map ...\n\n\n    if (idFeatureClicked) {\n      const dataFeature = grid.dataModel._data[idFeatureClicked];\n      const iriFeature = dataFeature.iri; // TODO: use InteractionDescriptor for the following\n\n      global.State.maps[0].olMap.getLayers().array_.forEach(layer => {\n        if (!(layer instanceof ol_layer__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"])) return;\n        layer.getSource().getFeatures().forEach(f => {\n          if (Object(_helpers__WEBPACK_IMPORTED_MODULE_2__[\"makePrefixName\"])(f.getProperties()['_idTargetIndividual']) === iriFeature) {\n            feature = f;\n          }\n        });\n      });\n    }\n\n    if (feature && !feature._highlighted) {\n      // A feature has been found and is not already in highlight state...\n      const oldStyle = feature.getStyle();\n      feature._highlighted = true;\n      feature.setStyle(new ol_style__WEBPACK_IMPORTED_MODULE_3__[\"Style\"]({\n        fill: new ol_style__WEBPACK_IMPORTED_MODULE_3__[\"Fill\"]({\n          color: 'rgba(121, 121, 12, 0.5)'\n        })\n      }));\n      setTimeout(() => {\n        feature.setStyle(oldStyle);\n        feature._highlighted = false;\n      }, 5000);\n    }\n\n    super.onMouseDown(grid, event);\n  }\n\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./src/js/customMouseHandler.js?");

/***/ }),

/***/ "./src/js/helpers.js":
/*!***************************!*\
  !*** ./src/js/helpers.js ***!
  \***************************/
/*! exports provided: makePrefixName, extractFeatureProperties, wktFormat, getValue, altitudeFromZoomLevel, sparqlQueryToContentWidgetData, sparqlRequestToTableData, debounce, responseToApplicationDescription, getCorrespondingFeatureOnAnyMapOrTerrain, randomString */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makePrefixName\", function() { return makePrefixName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extractFeatureProperties\", function() { return extractFeatureProperties; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"wktFormat\", function() { return wktFormat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getValue\", function() { return getValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"altitudeFromZoomLevel\", function() { return altitudeFromZoomLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sparqlQueryToContentWidgetData\", function() { return sparqlQueryToContentWidgetData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sparqlRequestToTableData\", function() { return sparqlRequestToTableData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"debounce\", function() { return debounce; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"responseToApplicationDescription\", function() { return responseToApplicationDescription; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCorrespondingFeatureOnAnyMapOrTerrain\", function() { return getCorrespondingFeatureOnAnyMapOrTerrain; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"randomString\", function() { return randomString; });\n/* harmony import */ var ol_format_WKT__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/format/WKT */ \"./node_modules/ol/format/WKT.js\");\n/* harmony import */ var ol_View__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/View */ \"./node_modules/ol/View.js\");\n/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries */ \"./src/js/queries.js\");\n/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./consts */ \"./src/js/consts.js\");\n\n\n\n\n/**\n * Shortens an iri (precisely an url) by extracting its prefix and localname\n * so that 'http://example.com/ns#Stuff' (or 'http://example.com/ns/Stuff')\n * becomes 'ns:Stuff'.\n * Iri of type urn are returned unmodified.\n *\n * @param {string} iri - The iri to be shortened\n * @returns {string} The shortened iri\n *\n */\n\nconst makePrefixName = iri => {\n  if (iri.indexOf('urn:id') > -1) return iri;\n  const ix1 = iri.lastIndexOf('#');\n  const ix2 = iri.lastIndexOf('/');\n  let p1;\n  let p2;\n\n  if (ix1 > -1 && ix1 > ix2) {\n    p2 = iri.slice(ix1 + 1);\n    p1 = iri.slice(ix2 + 1, ix1);\n  } else if (ix2 > -1) {\n    p2 = iri.slice(ix2 + 1);\n    const ix3 = iri.slice(0, ix2).lastIndexOf('/');\n    p1 = iri.slice(ix3 + 1, ix2);\n  }\n\n  p1 = p1.replace('22-rdf-syntax-ns', 'rdf').replace('rdf-schema', 'rdfs');\n  return `${p1}:${p2}`;\n};\nconst reservedProperties = ['_hasProperties', 'geometry', '_allowsSingleClick', '_allowsMouseOver', '_allowsContextMenu', '_allowsDoubleClick', '_idTargetIndividual', '_idIntermediateRepresentation'];\n/**\n * TODO\n *\n * @param {ol.Feature} ft - The OpenLayers Feature to extract properties from\n * @returns {object} the properties in a format that can be read by popup element\n */\n\nconst extractFeatureProperties = ft => {\n  const properties = ft.getProperties();\n  console.log(properties);\n  return Object.keys(properties).filter(k => !reservedProperties.includes(k)).map(k => ({\n    propertyName: k.startsWith('http') ? makePrefixName(k) : k,\n    propertyIRI: k,\n    values: properties[k].map(value => value.startsWith('http') ? makePrefixName(value) : value),\n    valuesIRIs: properties[k].map(value => value.startsWith('http') ? value : null)\n  }));\n}; // All the geometries will be fetched in WKT\n\nconst wktFormat = new ol_format_WKT__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\nconst numericDatatype = new Set(['http://www.w3.org/2001/XMLSchema#integer', 'http://www.w3.org/2001/XMLSchema#int', 'http://www.w3.org/2001/XMLSchema#long', 'http://www.w3.org/2001/XMLSchema#short', 'http://www.w3.org/2001/XMLSchema#double', 'http://www.w3.org/2001/XMLSchema#decimal', 'http://www.w3.org/2001/XMLSchema#float']);\n/**\n * Extract the value from a given 'key' on a given SPARQL\n * query solution ('item') or returns 'defaultValue' if the variable was\n * not bound on this element\n * (see https://www.w3.org/TR/sparql11-results-json/#select-encode-terms\n *  about how are encoded RDF terms in query results in JSON format).\n * Note that values of numeric datatype are casted from string to JS Number.\n *\n * @param {object} item\n * @param {string} key\n * @param {*} defaultValue\n * @returns {null|number|string|*}\n */\n\nconst getValue = (item, key, defaultValue = null) => {\n  if (item[key] && item[key].value) {\n    return numericDatatype.has(item[key].datatype) ? +item[key].value : item[key].value;\n  }\n\n  return defaultValue;\n};\nconst [A, B, C, D] = [40487.57, 0.00007096758, 91610.74, -40465.7];\n/**\n* Returns the altitude of the camera given the zoom level of an ol.View.\n*\n* @param {number} zl - The zoom level\n*/\n\nconst altitudeFromZoomLevel = zl => C * ((A - D) / (zl - D) - 1) ** (1 / B);\n/**\n * Prepare data for static content component.\n * @param {string} iriComponent - The iri (in covikoa graph) of the component\n * @returns {object} The object containing necessary information to instantiate StaticWidget.\n */\n\nconst sparqlQueryToContentWidgetData = async iriComponent => {\n  const queryContent = Object(_queries__WEBPACK_IMPORTED_MODULE_2__[\"makeQueryStaticContentComponent\"])(iriComponent);\n  const result = (await Object(_queries__WEBPACK_IMPORTED_MODULE_2__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_3__[\"QUERY_URL\"], queryContent)).results.bindings;\n  const htmlContent = getValue(result[0], 'htmlContent');\n  return {\n    iriComponent,\n    content: htmlContent\n  };\n};\n/**\n* Prepare data for table component.\n*\n* @param {string} iriTable - The iri (in covikoa graph) of the table\n* @returns {object} The object containing necessary information to instantiate TableWidget.\n*/\n\nconst sparqlRequestToTableData = async iriTable => {\n  const queryTable = Object(_queries__WEBPACK_IMPORTED_MODULE_2__[\"makeQueryTable\"])(iriTable);\n  const results = (await Object(_queries__WEBPACK_IMPORTED_MODULE_2__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_3__[\"QUERY_URL\"], queryTable)).results.bindings;\n\n  if (!results.length) {\n    // No table to display\n    return null;\n  } // Information about the table component\n\n\n  const conceptTargetDataModel = makePrefixName(getValue(results[0], 'conceptTargetDataModel', ''));\n  const titleTable = getValue(results[0], 'tableTitle', `Data table for ${conceptTargetDataModel}`); // We want to pass from narrow (stacked) dataset (entity-attribute-value model)\n  // to a wide (unstacked) dataset.\n\n  const data = [];\n  const fieldsSet = new Set(['iri']);\n  results.forEach(elem => {\n    const iriIndiv = makePrefixName(getValue(elem, 'indiv'));\n    const iriProperty = getValue(elem, 'p');\n    const value = getValue(elem, 'v');\n    const nameProperty = makePrefixName(iriProperty);\n    const existing = data.find(d => d.iri === iriIndiv);\n\n    if (!fieldsSet.has(nameProperty)) {\n      fieldsSet.add(nameProperty);\n    }\n\n    if (existing) {\n      existing[nameProperty] = value;\n    } else {\n      data.push({\n        iri: iriIndiv,\n        [nameProperty]: value\n      });\n    }\n  });\n  const primaryKey = ['iri'];\n  const fields = [...fieldsSet].map(elem => ({\n    name: elem,\n    type: 'string'\n  })); // TODO: all fields typed as string for now, to be changed\n  // Sort dataset by IRI of individual\n\n  data.sort((a, b) => a.iri > b.iri ? 1 : -1);\n  return {\n    titleTable,\n    // <- we will use this for our TableWidget\n    iriTable,\n    // <- this too\n    schemaAndData: {\n      // <- this is the part needed by @lumino/DataGrid inside TableWidget\n      data,\n      schema: {\n        primaryKey,\n        fields\n      }\n    }\n  };\n};\n/**\n* Debounce a function execution.\n*\n* @param {Function} func - The function to be executed after the debounce time.\n* @param {Number} wait - The amount of time to wait after the last\n*                         execution and before executing `func`.\n* @param {Object} context - Context in which to call `func`.\n* @returns {Function} The resulting debounced function.\n*/\n\nfunction debounce(func, wait, context) {\n  let result;\n  let timeout = null;\n  return function executedFunction(...args) {\n    const ctx = context || this;\n\n    const later = () => {\n      timeout = null;\n      result = func.apply(ctx, args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    return result;\n  };\n}\n/**\n * Parse the result of the SPARQL query describing the application and its component.\n *\n * @param resultQueryApplication\n * @returns {{app: {iri: (number|string|*|null), title: (number|string|*|null)}, components: *[]}}\n */\n\nfunction responseToApplicationDescription(resultQueryApplication) {\n  const components = [];\n  resultQueryApplication.forEach(elem => {\n    const o = {\n      iri: getValue(elem, 'geovizcomponent'),\n      type: getValue(elem, 'typeComponent'),\n      title: getValue(elem, 'componentTitle'),\n      position: getValue(elem, 'position'),\n      indexPosition: getValue(elem, 'order'),\n      width: getValue(elem, 'w'),\n      height: getValue(elem, 'h'),\n      options: {}\n    };\n\n    if (elem.geomInitialExtent) {\n      o.options.geomInitialExtent = getValue(elem, 'geomInitialExtent');\n    }\n\n    if (elem.basemapAttribution) {\n      o.options.basemapAttribution = getValue(elem, 'basemapAttribution');\n      o.options.basemapTemplateUrl = getValue(elem, 'basemapTemplateUrl');\n    }\n\n    if (elem.deactivatedInteractions) {\n      const temp = getValue(elem, 'deactivatedInteractions').split(',');\n      o.options.deactivatedInteractions = [];\n      temp.forEach(param => {\n        const v = param.replace(_consts__WEBPACK_IMPORTED_MODULE_3__[\"NS_CONTEXT\"], '');\n        o.options.deactivatedInteractions.push(v);\n      });\n    }\n\n    if (elem.scaleConstraintMinZoom) {\n      const minZoom = getValue(elem, 'scaleConstraintMinZoom');\n      const maxZoom = getValue(elem, 'scaleConstraintMaxZoom');\n      o.options.constrainedScale = {\n        type: 'zoom',\n        min: minZoom,\n        max: maxZoom\n      };\n    } else if (elem.scaleConstraintMinReso) {\n      const minReso = getValue(elem, 'scaleConstraintMinReso');\n      const maxReso = getValue(elem, 'scaleConstraintMaxReso');\n      o.options.constrainedScale = {\n        type: 'scaleDenominator',\n        min: minReso,\n        max: maxReso\n      };\n    }\n\n    if (elem.otherGvc) {\n      const others = getValue(elem, 'otherGvc');\n      o.linkedTo = others.split(';');\n    }\n\n    components.push(o);\n  }); // We will sort the components if an order (cvkc:order) is defined in the Derivation Model\n\n  return {\n    app: {\n      iri: getValue(resultQueryApplication[0], 'app'),\n      title: getValue(resultQueryApplication[0], 'appTitle', undefined)\n    },\n    components: components.every(c => c.indexPosition !== null) ? components.sort((a, b) => a.indexPosition - b.indexPosition) : components\n  };\n}\n/**\n * TODO\n * @param idMaterialisation - The ID (we use its IRI from the graph) of a materialisation.\n * @returns {{feature, mapWidget}} - Object containing the ol.Feature with 'idMaterialisation' as ID\n *                                    and the MapWidget on which it appears.\n */\n\nconst getCorrespondingFeatureOnAnyMapOrTerrain = idMaterialisation => {\n  let feature;\n  let mapWidget;\n  global.State.maps.concat(global.State.terrains).forEach(widget => {\n    if (widget.materialisationMapping[idMaterialisation]) {\n      feature = widget.materialisationMapping[idMaterialisation];\n      mapWidget = widget;\n    }\n  });\n  return {\n    feature,\n    mapWidget\n  };\n};\n/**\n * TODO\n * @param {string} prefix\n * @returns {string}\n */\n\nconst randomString = prefix => Math.random().toString(36).replace('0.', prefix || '');\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./src/js/helpers.js?");

/***/ }),

/***/ "./src/js/interactions.js":
/*!********************************!*\
  !*** ./src/js/interactions.js ***!
  \********************************/
/*! exports provided: bindMapInteractions, bindTerrainInteractions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bindMapInteractions\", function() { return bindMapInteractions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bindTerrainInteractions\", function() { return bindTerrainInteractions; });\n/* harmony import */ var _openglobus_og__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openglobus/og */ \"./node_modules/@openglobus/og/src/og/index.js\");\n/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./consts */ \"./src/js/consts.js\");\n/* harmony import */ var _queries__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries */ \"./src/js/queries.js\");\n/* harmony import */ var _popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./popup */ \"./src/js/popup.js\");\n/* harmony import */ var _utils_ol_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/ol-style */ \"./src/js/utils/ol-style.js\");\n/* harmony import */ var _utils_og_style__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/og-style */ \"./src/js/utils/og-style.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helpers */ \"./src/js/helpers.js\");\n/* harmony import */ var _widgets_mapWidgetOpenLayers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./widgets/mapWidgetOpenLayers */ \"./src/js/widgets/mapWidgetOpenLayers.js\");\n/* harmony import */ var _widgets_terrainWidgetOpenglobus__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./widgets/terrainWidgetOpenglobus */ \"./src/js/widgets/terrainWidgetOpenglobus.js\");\n/**\n* To store and instantiate the interactions\n* that might have been defined in the derivation model\n*\n*/\n\n\n\n\n\n\n\n\n\n/**\n * Cache for queries that are used to retrieve iri of materialisation targeted\n * by the interaction.\n * TODO: implement a real cache with some eviction strategy to not let it grow indefinitely\n * @type {{}}\n */\n\nconst cacheInteractionQuery = {};\n/**\n * Set of current pending queries\n * @type {Set<String>}\n */\n\nconst queryPending = new Set();\n/**\n * Enum-like object to describe possibles events.\n */\n\nconst InteractionEvent = {\n  SingleClick: 'SingleClick',\n  DoubleClick: 'DoubleClick',\n  ContextMenu: 'ContextMenu',\n  MouseOver: 'MouseOver'\n};\n/**\n * Enum-like object to describe possibles reason for ending\n * the outcome(s) of the interaction.\n */\n\nconst InteractionEnding = {\n  Closable: 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#Closable',\n  Duration: 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#Duration',\n  DuringEvent: 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#DuringEvent',\n  EmptySelection: 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#EmptySelection',\n  SameEventOnOtherIndividual: 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#SameEventOnOtherIndividual'\n};\n/**\n * A (somehow weird) mapping source -> destination, for each InteractionEvent type,\n * where source: the interacted feature\n *   and destination: the features that are rendered differently for this source.\n * @type {{[p: string]: {destination: [], source: null}|{destination: [], source: null}|{destination: [], source: null}|{destination: [], source: null}, '[InteractionEvent.SingleClick]': {destination: *[], source: null}, '[InteractionEvent.DoubleClick]': {destination: *[], source: null}, '[InteractionEvent.ContextMenu]': {destination: *[], source: null}, '[InteractionEvent.MouseOver]': {destination: *[], source: null}}}\n */\n\nconst SourceDestination = {\n  [InteractionEvent.SingleClick]: {\n    source: null,\n    destination: []\n  },\n  [InteractionEvent.DoubleClick]: {\n    source: null,\n    destination: []\n  },\n  [InteractionEvent.ContextMenu]: {\n    source: null,\n    destination: []\n  },\n  [InteractionEvent.MouseOver]: {\n    source: null,\n    destination: []\n  }\n};\n\nconst makeQueryWithCache = async query => {\n  if (!cacheInteractionQuery[query]) {\n    queryPending.add(query);\n    const queryResult = await Object(_queries__WEBPACK_IMPORTED_MODULE_2__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_1__[\"QUERY_URL\"], query);\n    cacheInteractionQuery[query] = queryResult;\n    queryPending.delete(query);\n  }\n\n  return cacheInteractionQuery[query];\n};\n\nconst handlePopup = async (ft, coords, map) => {\n  if (!ft.get('_hasProperties')) {\n    // The feature wasn't already enriched ...\n    const id = ft.get('_idIntermediateRepresentation');\n    const query = Object(_queries__WEBPACK_IMPORTED_MODULE_2__[\"makeQueryDataIndividual\"])(id);\n    const queryResult = await Object(_queries__WEBPACK_IMPORTED_MODULE_2__[\"reqQuery\"])(_consts__WEBPACK_IMPORTED_MODULE_1__[\"QUERY_URL\"], query);\n    const properties = {\n      _hasProperties: true\n    };\n    queryResult.results.bindings.forEach(d => {\n      if (d.v.type !== 'bnode') {\n        if (properties[d.p.value] !== undefined) {\n          properties[d.p.value].push(d.v.value);\n        } else {\n          properties[d.p.value] = [d.v.value];\n        }\n      }\n    }); // Enrich the feature so that a future click doesnt trigger the query again..\n\n    ft.setProperties(properties);\n    Object(_popup__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(map, ft, coords);\n  } else {\n    // Feature was already enriched so we can display the infobox directly\n    Object(_popup__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(map, ft, coords);\n  }\n};\n\nconst getFeaturesAtPixel = (map, pixel, excludeOverlayLayer = true) => {\n  let ft;\n  const filter = excludeOverlayLayer ? l => {\n    if (l.get('isOverlay')) return false;\n    return true;\n  } : undefined;\n  map.forEachFeatureAtPixel(pixel, feature => {\n    if (ft) return;\n    ft = feature;\n  }, {\n    hitTolerance: 2,\n    layerFilter: filter\n  });\n  return ft;\n};\n\nconst doInteraction = (queryResult, thisInteraction, outcome, mappingSrcDest, ft) => {\n  const materialisations = [...new Set(queryResult.results.bindings[0].materialisations.value.split(';'))];\n  const endings = thisInteraction.ending; // Remember that this feature is the source of the interaction\n\n  mappingSrcDest.source = ft; // For each materialisation id ...\n\n  materialisations.forEach(idMat => {\n    // .. we want to obtain the corresponding feature on any map/terrain widget\n    // (as well as a reference to the hosting widget)\n    const {\n      feature: _ft,\n      mapWidget: targetMapWidget\n    } = Object(_helpers__WEBPACK_IMPORTED_MODULE_6__[\"getCorrespondingFeatureOnAnyMapOrTerrain\"])(idMat); // Trigger different action depending on the widget\n    // (a todo-thing could be te define a common interface to avoid this)\n\n    if (targetMapWidget instanceof _widgets_mapWidgetOpenLayers__WEBPACK_IMPORTED_MODULE_7__[\"default\"]) {\n      // Make the style of this outcome\n      if (outcome.symbolizer) {\n        const style = Object(_utils_ol_style__WEBPACK_IMPORTED_MODULE_4__[\"makeStyle\"])({\n          type: 'PolygonSymbolizer',\n          specJSON: JSON.stringify(outcome.symbolizer)\n        });\n        if (outcome.typeOutcome === 'target') style.zIndex_ = 1000; // The idea is:\n        // - we clone the feature and give the style of the InteractionSymbolizer to the clone\n        // - we put the cloned feature on the overlay layer\n        // At the end of the interaction, the cloned feature is removed.\n\n        const clone = _ft.clone();\n\n        clone.setStyle(style);\n        targetMapWidget.getOverlayLayer().getSource().addFeature(clone); // What to do to end this interaction outcome\n\n        const cbEndInteraction = () => {\n          targetMapWidget.getOverlayLayer().getSource().removeFeature(clone);\n        }; // When to do it\n\n\n        if (thisInteraction.endingDuration) {\n          // TODO: handle if \"Duration\" is not the only ending\n          setTimeout(cbEndInteraction, thisInteraction.endingDuration * 1000);\n        } else {\n          mappingSrcDest.destination.push([endings, cbEndInteraction]);\n        }\n      } else if (outcome.symbolizerModifiers) {\n        const oldStyle = _ft.getStyle();\n\n        const typeGeom = _ft.getGeometry().getType();\n\n        const newStyle = Object(_utils_ol_style__WEBPACK_IMPORTED_MODULE_4__[\"getModifiedOlStyle\"])(oldStyle, typeGeom, outcome.symbolizerModifiers);\n        if (outcome.typeOutcome === 'target') newStyle.zIndex_ = 1000; // The idea is:\n        // - we take the current style of the feature, clone it and modify it according to\n        //   the SymbolizerModifiers\n        // - we set the feature style to \"noStyle\"\n        // - we clone the feature and give the new style to the clone\n        // - we put the cloned feature on the overlay layer\n        // At the end of the interaction, the cloned feature is removed\n        // and the real feature gets its old style back.\n\n        _ft.setStyle(_utils_ol_style__WEBPACK_IMPORTED_MODULE_4__[\"noStyle\"]);\n\n        const clone = _ft.clone();\n\n        clone.setStyle(newStyle);\n        targetMapWidget.getOverlayLayer().getSource().addFeature(clone); // What to do to end this interaction outcome\n\n        const cbEndInteraction = () => {\n          _ft.setStyle(oldStyle);\n\n          targetMapWidget.getOverlayLayer().getSource().removeFeature(clone);\n        }; // When to do it\n\n\n        if (thisInteraction.endingDuration) {\n          // TODO: handle if \"Duration\" is not the only ending\n          setTimeout(cbEndInteraction, thisInteraction.endingDuration * 1000);\n        } else {\n          mappingSrcDest.destination.push([endings, cbEndInteraction]);\n        }\n      }\n    } else if (targetMapWidget instanceof _widgets_terrainWidgetOpenglobus__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n      if (outcome.symbolizer) {\n        // _ft is an openglobus Entity\n        const style = Object(_utils_og_style__WEBPACK_IMPORTED_MODULE_5__[\"makeStyle\"])(outcome.symbolizer); // get old style values\n\n        const oldFillColor = { ..._ft.geometry._style.fillColor\n        };\n        const oldLineColor = { ..._ft.geometry._style.lineColor\n        }; // const oldStrokeColor = { ..._ft.geometry._style.strokeColor };\n\n        const oldLineWidth = { ..._ft.geometry._style.lineWidth\n        };\n        const oldStrokeWidth = { ..._ft.geometry._style.strokeWidth\n        }; // compute new values\n\n        const newFillColor = style.fillColor ? Object(_utils_og_style__WEBPACK_IMPORTED_MODULE_5__[\"parseRgbaColor4v\"])(style.fillColor) : oldFillColor;\n        const newLineColor = style.lineColor ? Object(_utils_og_style__WEBPACK_IMPORTED_MODULE_5__[\"parseRgbaColor4v\"])(style.lineColor) : oldLineColor; // const newStrokeColor = style.strokeColor ? parseRgbaColor4v(style.strokeColor) : oldStrokeColor;\n\n        const newLineWidth = style.lineWidth || oldLineWidth;\n        const newStrokeWidth = style.strokeWidth || oldStrokeWidth; // set new values..\n\n        _ft.geometry.setFillColor4v(newFillColor);\n\n        _ft.geometry.setLineColor4v(newLineColor); // _ft.geometry.setStrokeColor4v(newStrokeColor);\n\n\n        _ft.geometry.setLineWidth(newLineWidth);\n\n        _ft.geometry.setStrokeWidth(newStrokeWidth); // ... and bring entity to front\n\n\n        if (outcome.typeOutcome === 'target') _ft.geometry.bringToFront(); // end of the interaction\n\n        const cbEndInteraction = () => {\n          _ft.geometry.setFillColor4v(oldFillColor);\n\n          _ft.geometry.setLineColor4v(oldLineColor); // _ft.geometry.setStrokeColor4v(oldStrokeColor);\n\n\n          _ft.geometry.setLineWidth(oldLineWidth);\n\n          _ft.geometry.setStrokeWidth(oldStrokeWidth);\n        };\n\n        if (thisInteraction.endingDuration) {\n          // TODO: handle if \"Duration\" is not the only ending\n          setTimeout(cbEndInteraction, thisInteraction.endingDuration * 1000);\n        } else {\n          mappingSrcDest.destination.push([endings, cbEndInteraction]);\n        }\n      } else if (outcome.symbolizerModifiers) {}\n    }\n  });\n};\n\nconst dispatchInteraction = async (eventType, map, ft, coords) => {\n  const propertyName = `_allows${eventType}`;\n  const idInteraction = ft.get(propertyName);\n  if (!idInteraction) return;\n  const mappingSrcDest = SourceDestination[eventType]; // Get the description of the interaction\n\n  const thisInteraction = global.State.interactions[idInteraction]; // Determine what to do for each outcome of this interaction\n\n  thisInteraction.outcomes.forEach(async outcome => {\n    if (thisInteraction.analyticalPurpose === 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#identify' && outcome.onComponent) {\n      // Todo: improve dispatching if multiple popup ...\n      await handlePopup(ft, coords, map);\n    } else if (outcome.selectionStrategyType === 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#FollowPropertyPath' && outcome.selectionStrategyTargetsEntitiesFrom && outcome.selectionStrategyPropertyPath && (outcome.symbolizer || outcome.symbolizerModifiers)) {\n      const thisMaterialisation = ft.getId();\n      const targetPortrayalOrPortrayalRule = outcome.selectionStrategyTargetsEntitiesFrom;\n      const propertyPath = outcome.selectionStrategyPropertyPath; // We need to perform a different request depending on if this is an outcome\n      // for the corresponding target feature / entity\n      // or if this is an outcome for the rest of the features/entity\n      // of the portrayal / portrayal rule\n\n      const fnQuery = outcome.typeOutcome === 'target' ? _queries__WEBPACK_IMPORTED_MODULE_2__[\"makeQueryInteractionFollowPropertyPathForTarget\"] : _queries__WEBPACK_IMPORTED_MODULE_2__[\"makeQueryInteractionFollowPropertyPathForRest\"];\n      const query = fnQuery(thisMaterialisation, propertyPath, targetPortrayalOrPortrayalRule);\n      if (queryPending.has(query)) return;\n      const queryResult = await makeQueryWithCache(query);\n      doInteraction(queryResult, thisInteraction, outcome, mappingSrcDest, ft);\n    } else if (outcome.selectionStrategyType === 'http://lig-tdcge.imag.fr/steamer/covikoa/interaction#SameIndividual' && outcome.selectionStrategyTargetsEntitiesFrom && (outcome.symbolizer || outcome.symbolizerModifiers)) {\n      const thisMaterialisation = ft.getId();\n      const targetPortrayalOrPortrayalRule = outcome.selectionStrategyTargetsEntitiesFrom; // We need to perform a different request depending on if this is an outcome\n      // for the corresponding target feature / entity\n      // or if this is an outcome for the rest of the features/entity\n      // of the portrayal / portrayal rule\n\n      const fnQuery = outcome.typeOutcome === 'target' ? _queries__WEBPACK_IMPORTED_MODULE_2__[\"makeQueryInteractionSameIndividualForTarget\"] : _queries__WEBPACK_IMPORTED_MODULE_2__[\"makeQueryInteractionSameIndividualForRest\"];\n      const query = fnQuery(thisMaterialisation, targetPortrayalOrPortrayalRule);\n      if (queryPending.has(query)) return;\n      const queryResult = await makeQueryWithCache(query);\n      doInteraction(queryResult, thisInteraction, outcome, mappingSrcDest, ft);\n    }\n  });\n};\n/**\n * When a new event occurs this function restores the style of the entities for which it had been modified by the previous event, according to the ending type of the interaction.\n *\n * @param {ol.Feature|og.Entity} ft - the ol feature or the og entity that is interacted with\n * @param {String} eventType - the type of event\n * @returns {boolean} whether to continue to process the interaction or not\n */\n\n\nconst discardPreviousInteractionState = (ft, eventType) => {\n  // The source -> destination mapping for this event type\n  const mappingSrcDest = SourceDestination[eventType]; // The targeted feature is the same as the previous one\n  // (i.e. the cursor is moving / clicking on the same feature, so nothing to do)\n\n  if (mappingSrcDest.source && ft && ft.id_ === mappingSrcDest.source.id_) {\n    return false;\n  }\n\n  if (mappingSrcDest.source && !ft) {\n    // There was a feature selected by this event (mappingSrcDest.source)\n    // but now there is no feature under this event (!ft)\n    // This corresponds to discarding the outcome of interaction\n    // that happens during the event (EmptySelection)\n    // or that are discarded by an empty selection (EmptySelection)\n    const filtered = [];\n    mappingSrcDest.source = undefined;\n    mappingSrcDest.destination.forEach(([endings, callbackEnd]) => {\n      if (endings.includes(InteractionEnding.DuringEvent) || endings.includes(InteractionEnding.EmptySelection)) {\n        if (callbackEnd) callbackEnd();\n      } else {\n        filtered.push([endings, callbackEnd]);\n      }\n    });\n    mappingSrcDest.destination = filtered;\n  } else if (mappingSrcDest.source && ft.id_ !== mappingSrcDest.source.id_) {\n    // There was a feature selected by this event (mappingSrcDest.source)\n    // and there is now a new feature selected (ft.id_ !== mappingSrcDest.source.id_)\n    // This corresponds to discarding the outcome of interaction\n    // that happens during the event (DuringEvent) or that are\n    // discarded by the same event / interaction on an other individual (SameEventOnOtherIndividual)\n    const filtered = [];\n    mappingSrcDest.destination.forEach(([endings, callbackEnd]) => {\n      mappingSrcDest.source = undefined;\n\n      if (endings.includes(InteractionEnding.DuringEvent) || endings.includes(InteractionEnding.SameEventOnOtherIndividual)) {\n        if (callbackEnd) callbackEnd();\n      } else {\n        filtered.push([endings, callbackEnd]);\n      }\n    });\n    mappingSrcDest.destination = filtered;\n  }\n\n  if (!ft) return false;\n  return true;\n};\n\nconst callBackInteractionMap = async (e, eventType, olMap) => {\n  // Get a reference to the map feature(s) behind the click\n  const ft = getFeaturesAtPixel(olMap, e.pixel, true);\n  const proccessInteraction = discardPreviousInteractionState(ft, eventType);\n  if (!proccessInteraction) return;\n  dispatchInteraction(eventType, olMap, ft, e.coordinate);\n};\n\nconst bindSingleClickMap = mapWidget => {\n  const eventType = InteractionEvent.SingleClick;\n  mapWidget.olMap.on('singleclick', async e => {\n    callBackInteractionMap(e, eventType, mapWidget.olMap);\n  });\n};\n\nconst bindDoubleClickMap = mapWidget => {\n  const eventType = InteractionEvent.DoubleClick;\n  mapWidget.olMap.on('dblclick', async e => {\n    callBackInteractionMap(e, eventType, mapWidget.olMap);\n  });\n};\n\nconst bindMouseOverMap = mapWidget => {\n  const eventType = InteractionEvent.MouseOver;\n  mapWidget.olMap.on('pointermove', async e => {\n    if (e.dragging) return;\n    await callBackInteractionMap(e, eventType, mapWidget.olMap);\n  });\n};\n\nconst bindContextMenuMap = mapWidget => {\n  const eventType = InteractionEvent.ContextMenu;\n  mapWidget.olMap.on('dblclick', async e => {\n    callBackInteractionMap(e, eventType, mapWidget.olMap);\n  });\n};\n\nconst callBackInteractionTerrain = async (event, eventType, ogTerrain) => {\n  console.log(event);\n  const {\n    pickingObject\n  } = event;\n  const ft = pickingObject instanceof _openglobus_og__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"] ? pickingObject : null;\n  const processInteraction = discardPreviousInteractionState(ft, eventType);\n  if (!processInteraction) return;\n  const coordinates = ogTerrain.planet.getLonLatFromPixelTerrain(event); // TODO: make coordinates in same format for ol and og\n\n  dispatchInteraction(eventType, ogTerrain, ft, coordinates);\n};\n\nconst bindSingleClickTerrain = terrainWidget => {\n  const eventType = InteractionEvent.SingleClick;\n  terrainWidget.ogTerrain.planet.renderer.events.on('lclick', async event => {\n    await callBackInteractionTerrain(event, eventType, terrainWidget.ogTerrain);\n  });\n};\n\nconst bindMouseOverTerrain = terrainWidget => {\n  const eventType = InteractionEvent.MouseOver;\n  terrainWidget.ogTerrain.planet.renderer.events.on('mousemove', async event => {\n    await callBackInteractionTerrain(event, eventType, terrainWidget.ogTerrain);\n  });\n};\n\nconst bindDoubleClickTerrain = terrainWidget => {\n  const eventType = InteractionEvent.DoubleClick;\n  terrainWidget.ogTerrain.planet.renderer.events.on('ldblclick', async event => {\n    await callBackInteractionTerrain(event, eventType, terrainWidget.ogTerrain);\n  });\n};\n\nconst bindContextMenuTerrain = terrainWidget => {\n  const eventType = InteractionEvent.ContextMenu;\n  terrainWidget.ogTerrain.planet.renderer.events.on('rclick', async event => {\n    await callBackInteractionTerrain(event, eventType, terrainWidget.ogTerrain);\n  });\n};\n\nconst bindMapInteractions = mapWidget => {\n  // TODO: we should not call these functions if no interaction use these event\n  //  (in particular for mouseover)\n  bindSingleClickMap(mapWidget);\n  bindMouseOverMap(mapWidget);\n  bindDoubleClickMap(mapWidget);\n  bindContextMenuMap(mapWidget);\n};\nconst bindTerrainInteractions = terrainWidget => {\n  // TODO: same as with map interactions\n  bindSingleClickTerrain(terrainWidget);\n  bindMouseOverTerrain(terrainWidget);\n  bindDoubleClickTerrain(terrainWidget);\n  bindContextMenuTerrain(terrainWidget);\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./src/js/interactions.js?");

/***/ }),

/***/ "./src/js/legend.js":
/*!**************************!*\
  !*** ./src/js/legend.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _css_legend_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/legend.css */ \"./src/css/legend.css\");\n/* harmony import */ var _css_legend_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_legend_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ol_ext_legend_Legend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol-ext/legend/Legend */ \"./node_modules/ol-ext/legend/Legend.js\");\n/* harmony import */ var ol_ext_control_Legend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol-ext/control/Legend */ \"./node_modules/ol-ext/control/Legend.js\");\n/* harmony import */ var _utils_ol_style__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/ol-style */ \"./src/js/utils/ol-style.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers */ \"./src/js/helpers.js\");\n\n\n\n\n\n/**\n* Construct the legend for a given 'map', according to the 'portrayals'\n* it contains.\n* We use ol-ext.legend.Legend and ol-ext.control.Legend for this.\n*\n* @param {ol/Map} map - The map on which the legend will be added.\n* @param {array} res_list - The result of the sparql query for this map.\n* @param {array} portrayals - ..\n* @returns {void}\n*/\n\nconst makeLegend = (map, res_list, portrayals) => {\n  // Extract the information to build the legend...\n  const tempSymb = {};\n  res_list.forEach(r => {\n    // We dont build legend for TextSymbolizer for now\n    if (Object(_helpers__WEBPACK_IMPORTED_MODULE_4__[\"getValue\"])(r, 'typeSymbolizer', '') === 'https://gis.lu.se/ont/data_portrayal/symbolizer#TextSymbolizer') return;\n    const iriPortrayal = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__[\"getValue\"])(r, 'portrayal', null); // If legend is requested but no title is provided for the portrayal we use its IRI\n\n    const labelPortrayal = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__[\"getValue\"])(r, 'labelPortrayal', null) || iriPortrayal; // eslint-disable-line no-plusplus\n\n    const iriSymbolizer = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__[\"getValue\"])(r, 'symbolizer', null); // If legend is requested but no title/label is provided for the symbolizer we use its IRI\n\n    const labelSymbol = Object(_helpers__WEBPACK_IMPORTED_MODULE_4__[\"getValue\"])(r, 'labelSymbol', null) || iriSymbolizer; // Collect description of symbolizer inside their portrayal\n\n    if (tempSymb[labelPortrayal] !== undefined) {\n      tempSymb[labelPortrayal].add(JSON.stringify([labelSymbol, iriSymbolizer]));\n    } else {\n      tempSymb[labelPortrayal] = new Set([JSON.stringify([labelSymbol, iriSymbolizer])]);\n    }\n  });\n  const candidateSymbolizers = portrayals.flatMap(el => el.symbolizer ? el.symbolizer : el.symbolizers);\n  const legendItems = [];\n  Object.keys(tempSymb).forEach(titleGroup => {\n    const resGroup = {\n      title: titleGroup,\n      elements: []\n    };\n    [...tempSymb[titleGroup]].forEach(el => {\n      const [value, symbolizer] = JSON.parse(el);\n      const o = candidateSymbolizers.find(d => d.name === symbolizer);\n      resGroup.elements.push({\n        symbolizer: o,\n        text: value\n      });\n    });\n    legendItems.push(resGroup);\n  });\n  legendItems.forEach(group => {\n    if (JSON.parse(group.elements[0].symbolizer.specJSON).kind === 'Mark') {\n      // eslint-disable-next-line no-param-reassign\n      const t = group.elements.sort((a, b) => JSON.parse(b.symbolizer.specJSON).radius - JSON.parse(a.symbolizer.specJSON).radius);\n      group.elements = [t[0], t[3], t[t.length - 1]];\n    }\n  }); // Collapse the legend if there is numerous items\n\n  const collapsed = legendItems.some(el => el.elements.length > 6); // Build the legend\n  // with the help of ol-ext/legend/Legend and ol-ext/control/Legend components\n\n  let firstLegendCtrl;\n  legendItems.forEach((legendItem, j) => {\n    const legend = new ol_ext_legend_Legend__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      title: legendItem.title,\n      margin: 5\n    }); // If there is multiple groups of legend element for a map\n    // we need to specify that the following groups have\n    // to be attached to the first one by specifying a 'target' argument\n\n    if (j === 0) {\n      // get reference to first group if needed by the following ones..\n      firstLegendCtrl = new ol_ext_control_Legend__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        legend,\n        collapsed\n      });\n      map.addControl(firstLegendCtrl);\n    } else {\n      // target the first ControlLegend\n      map.addControl(new ol_ext_control_Legend__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        legend,\n        collapsed,\n        target: firstLegendCtrl.element\n      }));\n    }\n\n    legendItem.elements.forEach(elem => {\n      const typeGeom = elem.symbolizer.type.replace('Symbolizer', '');\n      legend.addItem({\n        style: Object(_utils_ol_style__WEBPACK_IMPORTED_MODULE_3__[\"makeStyle\"])(elem.symbolizer),\n        title: elem.text,\n        typeGeom\n      });\n    });\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (makeLegend);\n\n//# sourceURL=webpack:///./src/js/legend.js?");

/***/ }),

/***/ "./src/js/popup.js":
/*!*************************!*\
  !*** ./src/js/popup.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return displayPopup; });\n/* harmony import */ var _css_popup_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/popup.css */ \"./src/css/popup.css\");\n/* harmony import */ var _css_popup_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_popup_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ol_Overlay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Overlay */ \"./node_modules/ol/Overlay.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers */ \"./src/js/helpers.js\");\n\n\n\n\nconst getPopupElements = (() => {\n  // The popup (ol.Overlay) is linked to the map so it needs to\n  // be instantiated once for each map.\n  // We use the ol_uid of the maps to keep track of this\n  // in the innerElementsByMap object.\n  const innerElementsByMap = {};\n  /**\n   * Get the elements necessary to manipulate the popup\n   * that displays information about a feature.\n   *\n   * @param {ol.Map} map - A reference to the map\n   * @returns {object} An object with 4 members (container, content, closer and overlay)\n   */\n\n  const fn = map => {\n    const uid = map.ol_uid;\n    const innerElements = innerElementsByMap[uid];\n\n    if (!innerElements) {\n      // Popup for this map wasn't created yet\n      // Code for popup creation is\n      // inspired from https://openlayers.org/en/latest/examples/popup.html\n      const _container = document.createElement('div');\n\n      _container.id = 'popup';\n\n      _container.classList.add('ol-popup');\n\n      _container.innerHTML = `\n    <a href=\"#\" id=\"popup-closer\" class=\"ol-popup-closer\"></a>\n    <div id=\"popup-content\"></div>\n      `;\n      document.body.appendChild(_container);\n\n      const _content = _container.querySelector('#popup-content');\n\n      const _closer = _container.querySelector('#popup-closer');\n\n      const _overlay = new ol_Overlay__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        element: _container,\n        autoPan: true,\n        autoPanAnimation: {\n          duration: 250\n        }\n      });\n\n      map.addOverlay(_overlay);\n\n      _closer.onclick = () => {\n        _overlay.setPosition(undefined);\n\n        _closer.blur();\n\n        return false;\n      };\n\n      innerElementsByMap[uid] = {\n        container: _container,\n        content: _content,\n        closer: _closer,\n        overlay: _overlay\n      };\n      return innerElementsByMap[uid];\n    }\n\n    return innerElements;\n  };\n\n  return fn;\n})();\n/**\n * Display the popup that will contain the properties\n * of the given `ft` on the given `map` at the given `coords`.\n *\n * @param {ol.Map} map - The map on which the popup have to be displayed\n * @param {ol.Feature} ft - The clicked feature\n * @param {array} coords - Coordinates of the click\n * @returns {void}\n */\n\n\nconst displayPopup = (map, ft, coords) => {\n  // Format the values to be displayed\n  const propertiesToRender = Object(_helpers__WEBPACK_IMPORTED_MODULE_2__[\"extractFeatureProperties\"])(ft); // Get a reference to the popup element\n\n  const {\n    content,\n    overlay\n  } = getPopupElements(map);\n  const idIndividual = ft.get('_idTargetIndividual'); // Create the table of property-value pairs\n  // with the full IRI of the property displayable when hovering over\n  // its short name...\n\n  content.innerHTML = `\n<p class=\"uri-feature\"><a href=\"${idIndividual}\" rel=\"noreferrer\" target=\"_blank\">${idIndividual}</a></p>\n<table class=\"table-info\">\n  <tbody>\n${propertiesToRender.map(d => `<tr>\n      <td title=\"${d.propertyIRI}\" class=\"field-name\">\n        <span><a href=\"${d.propertyIRI}\" rel=\"noreferrer\" target=\"_blank\">${d.propertyName}</a></span>\n      </td>\n      <td>\n        <span class=\"field-value\">\n        ${d.values.map((value, i) => `${d.valuesIRIs[i] ? `<a class=\"field-value\" title=\"${d.valuesIRIs[i]}\" href=\"${d.valuesIRIs[i]}\" rel=\"noreferrer\" target=\"_blank\">` : ''}${value}${d.valuesIRIs[i] ? '</a>' : ''}`).join(', ')}\n        </span>\n      </td>\n    </tr>`).join('')}\n  </tbody>\n</table>`; // Display the popup on the map so that it will follow\n  // the clicked coordinates when panning\n\n  overlay.setPosition(coords);\n};\n\n\n\n//# sourceURL=webpack:///./src/js/popup.js?");

/***/ }),

/***/ "./src/js/queries.js":
/*!***************************!*\
  !*** ./src/js/queries.js ***!
  \***************************/
/*! exports provided: queryContextGVA, makeQueryLegend, makeQueryPortrayal, makeQueryDataIndividual, makeQueryTable, makeQueryStaticContentComponent, makeQueryInteractionFollowPropertyPathForTarget, makeQueryInteractionFollowPropertyPathForRest, makeQueryInteractionSameIndividualForTarget, makeQueryInteractionSameIndividualForRest, reqQuery, reqUpdate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queryContextGVA\", function() { return queryContextGVA; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryLegend\", function() { return makeQueryLegend; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryPortrayal\", function() { return makeQueryPortrayal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryDataIndividual\", function() { return makeQueryDataIndividual; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryTable\", function() { return makeQueryTable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryStaticContentComponent\", function() { return makeQueryStaticContentComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryInteractionFollowPropertyPathForTarget\", function() { return makeQueryInteractionFollowPropertyPathForTarget; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryInteractionFollowPropertyPathForRest\", function() { return makeQueryInteractionFollowPropertyPathForRest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryInteractionSameIndividualForTarget\", function() { return makeQueryInteractionSameIndividualForTarget; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeQueryInteractionSameIndividualForRest\", function() { return makeQueryInteractionSameIndividualForRest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"reqQuery\", function() { return reqQuery; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"reqUpdate\", function() { return reqUpdate; });\n// First query is to get informations about the GeoVisualApplication,\n// its GeoVisualComponent(s) and their possible initial context\nconst queryContextGVA = `\nprefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix geo: <http://www.opengis.net/ont/geosparql#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\nprefix cvkc: <http://lig-tdcge.imag.fr/steamer/covikoa/context#>\nprefix owl: <http://www.w3.org/2002/07/owl#>\nprefix dct: <http://purl.org/dc/terms/>\nprefix scale: <https://gis.lu.se/ont/visualisation_scale#>\n\nSELECT DISTINCT ?app ?appTitle ?geovizcomponent ?typeComponent ?componentTitle ?w ?h ?geomInitialExtent ?basemapTemplateUrl ?basemapAttribution ?otherGvc ?order ?position ?deactivatedInteractions ?scaleConstraintMinZoom ?scaleConstraintMaxZoom ?scaleConstraintMinReso ?scaleConstraintMaxReso\nWHERE {\n  ?app a gviz:GeoVisualApplication .\n  ?app gviz:hasGeoVisualComponent ?geovizcomponent .\n\n  # Maybe the app has a title ?\n  OPTIONAL {\n    ?app dct:title ?appTitle .\n  }\n\n  ?geovizcomponent a ?typeComponent .\n  FILTER(?typeComponent in (gviz:Map2dComponent, gviz:Map3dComponent, gviz:TableComponent, gviz:StaticContentComponent, gviz:FilterComponent)) .\n\n  # Maybe the component has a title ?\n  OPTIONAL {\n    ?geovizcomponent dct:title ?componentTitle .\n  }\n\n  # Maybe the map is linked (sync'd) to an other map ?\n  OPTIONAL {\n    ?geovizcomponent gviz:hasCenterAndResolutionSynchronizedWith ?otherGvc .\n  }\n\n  # ...\n  OPTIONAL { ?geovizcomponent cvkc:position ?position }\n  OPTIONAL { ?geovizcomponent cvkc:order ?order }\n  OPTIONAL {\n    ?geovizcomponent cvkc:widthPx ?w ;\n                     cvkc:heightPx ?h .\n  }\n  OPTIONAL {\n    ?geovizcomponent cvkc:widthRelative ?wRelative ;\n                     cvkc:heightRelative ?hRelative .\n  }\n  OPTIONAL {\n    ?geovizcomponent cvkc:hasConstrainedScaleRange ?scaleConstraint .\n    OPTIONAL {\n        ?scaleConstraint scale:hasMinZoomLevel ?scaleConstraintMinZoom .\n        ?scaleConstraint scale:hasMaxZoomLevel ?scaleConstraintMaxZoom .\n    }\n    OPTIONAL {\n        ?scaleConstraint scale:hasMinScaleDenominator ?scaleConstraintMinReso .\n        ?scaleConstraint scale:hasMaxScaleDenominator ?scaleConstraintMaxReso .\n    }\n  }\n  OPTIONAL {\n    ?geovizcomponent cvkc:hasBaseMap [\n      cvkc:templateUrl ?basemapTemplateUrl ;\n      dct:rights ?basemapAttribution ;\n    ] .\n  }\n  # Maybe an initial extent for the map ?\n  OPTIONAL {\n    ?geovizcomponent cvkc:hasMapExtent [ geo:asWKT ?geomInitialExtent ] .\n  }\n  \n  # Maybe the component deactivates some classical interactions like\n  # zooming, panning or rotating\n  OPTIONAL {\n    {\n      SELECT ?geovizcomponent (GROUP_CONCAT(?someStuff; separator=\",\") as ?deactivatedInteractions) WHERE {\n          ?geovizcomponent cvkc:deactivesInteraction ?someStuff .\n      } GROUP BY ?geovizcomponent\n    }\n  }\n  # Maybe\n}\n`;\nconst makeQueryLegend = mapComponentUri => `\nprefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\n\nSELECT *\nWHERE {\n  ?legendcomponent a gviz:LegendComponent ;\n                   gviz:linkedTo <${mapComponentUri}> .\n}`; // Returns a parametrized query for a given GeoVisualComponent\n// allowing to fetch all the necessary informations to\n// build the portrayals this component should display\n// language=SPARQL\n\nconst makeQueryPortrayal = mapComponentUri =>\n/* language=SPARQL */\n`\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix dct: <http://purl.org/dc/terms/>\nprefix prov: <http://www.w3.org/ns/prov#>\nprefix geo: <http://www.opengis.net/ont/geosparql#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix graphic: <https://gis.lu.se/ont/data_portrayal/graphic#>\nprefix symbolizer: <https://gis.lu.se/ont/data_portrayal/symbolizer#>\nprefix scale: <https://gis.lu.se/ont/visualisation_scale#>\nprefix ion: <http://lig-tdcge.imag.fr/steamer/covikoa/interaction#>\nprefix afn: <http://jena.apache.org/ARQ/function#>\n\nSELECT DISTINCT ?labelPortrayal ?portrayal ?portrayalRule ?gvrs ?indivs ?geoms ?materialisations ?displayIndex ?symbolizer ?typeSymbolizer ?propJson ?minScale ?maxScale ?minZoomLevel ?maxZoomLevel ?labelSymbol ?interaction\nWHERE {\n  {\n  SELECT\n    ?portrayal\n    ?labelPortrayal\n    ?portrayalRule\n    ?displayIndex\n    ?interaction\n    (GROUP_CONCAT(?gvr;separator=\";\") as ?gvrs)\n    (GROUP_CONCAT(?indiv;separator=\";\") as ?indivs)\n    (GROUP_CONCAT(?geom;separator=\";\") as ?geoms)\n    (GROUP_CONCAT(?materialisation;separator=\";\") as ?materialisations)\n    ?symbolizer\n    ?minScale\n    ?maxScale\n    ?minZoomLevel\n    ?maxZoomLevel\n    ?labelSymbol\n  WHERE {\n        ?gvr gviz:represents ?indiv ;\n              gviz:hasMaterialisation ?materialisation .\n        ?materialisation gviz:appearsIn <${mapComponentUri}> ;\n                          cvkd:fromPortrayalRule ?portrayalRule ;\n                          gviz:isSymbolizedBy ?symbolizer ;\n                          geo:hasGeometry [ geo:asWKT ?geom ] .\n\n        ?portrayal gviz:hasPortrayalRule ?portrayalRule .\n\n        OPTIONAL {\n          ?materialisation gviz:displayIndex ?displayIndex .\n        }\n        OPTIONAL {\n          ?materialisation scale:hasScale [\n              scale:hasMinZoomLevel ?minZoomLevel ;\n              scale:hasMaxZoomLevel ?maxZoomLevel ;\n          ] .\n        }\n        OPTIONAL {\n          ?materialisation scale:hasScale [\n              scale:hasMinScaleDenominator ?minScale ;\n              scale:hasMaxScaleDenominator ?maxScale ;\n          ] .\n        }\n        # We want the label associated to the portrayal rule and to its parent portrayal\n        OPTIONAL {\n          ?portrayal dct:title ?labelPortrayal .\n        }\n        OPTIONAL {\n          ?symbolizer ^(symbolizer:hasSymbolizer) ?symbol .\n          ?symbol dct:title ?labelSymbol .\n          # Maybe the symbolizer is used in many symbols, hence the \"filter exists\" (so that we have the proped label)\n          # but also maybe the symbol is not directly linked to the portrayal rule (but in this case\n          # we are sure the symbolizer is derived from a TemplateSymbolizer, so it is only used once, so no problem when fetching its label)\n          FILTER(\n            EXISTS { ?portrayalRule gviz:hasSymbol ?symbol . }\n            || NOT EXISTS { [] gviz:hasSymbol ?symbol . }\n          )\n        }\n    } GROUP BY ?portrayal ?labelPortrayal ?portrayalRule ?symbolizer ?labelSymbol ?interaction ?displayIndex ?minScale ?maxScale ?minZoomLevel ?maxZoomLevel\n  }\n  # Serialise the symbolizer in JSON\n  ?symbolizer gviz:asGeoStylerJSON ?propJson .\n  # We want to know if the symbolizer is a (Point|Line|Polygon|Text|Composite)Symbolizer\n  ?symbolizer a ?typeSymbolizer .\n  ?typeSymbolizer rdfs:subClassOf symbolizer:Symbolizer .\n  FILTER(?typeSymbolizer != symbolizer:Symbolizer) .\n  \n  # We want to know if interaction are allowed on these features...\n  # (and we serialize all this information in JSON, in a subquery with group concat\n  # because there may by several interactions on a portrayal)\n  OPTIONAL {\n    ?portrayal ion:allowsInteraction ?ion .\n    {\n    SELECT ?portrayal (CONCAT('[', GROUP_CONCAT(?_interaction;separator=\",\"), ']') as ?interaction) WHERE {\n          ?portrayal ion:allowsInteraction ?ion .\n          ?ion ion:interactionAsJSON ?_interaction .\n      } GROUP BY ?portrayal\n    }\n  }\n} ORDER BY ?displayIndex ?symbolizer\n`; // Returns a parametrized query for a given GeoVisualIntermediateRepresentation\n// allowing to fetch all the data from the individual it represents\n\nconst makeQueryDataIndividual = gvrIri => `\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT ?indiv ?p ?v\nWHERE {\n  <${gvrIri}> gviz:represents ?indiv .\n  ?indiv ?p ?v .\n}\n`;\nconst makeQueryTable = tableIri => `\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix dct: <http://purl.org/dc/terms/>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\n\nSELECT ?tableComponent ?tableTitle ?conceptTargetDataModel ?indiv ?p ?v WHERE {\n  BIND(<${tableIri}> as ?tableComponent) .\n  ?tableComponent a gviz:TableComponent .\n  OPTIONAL { ?tableComponent dct:title ?tableTitle . }\n  ?portrayal a gviz:Portrayal ;\n    gviz:onComponent ?tableComponent ;\n    gviz:denotesConcept ?conceptTargetDataModel .\n  ?indiv a ?conceptTargetDataModel .\n  ?indiv ?p ?v .\n  FILTER(isLiteral(?v)).\n}\n`;\nconst makeQueryStaticContentComponent = staticComponentIri => `\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix dct: <http://purl.org/dc/terms/>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix cvkc: <http://lig-tdcge.imag.fr/steamer/covikoa/context#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\n\nSELECT ?staticContentComponent ?staticContentComponentTitle ?htmlContent ?width ?height ?position WHERE {\n  BIND(<${staticComponentIri}> as ?staticComponentIri) .\n  ?staticContentComponent a gviz:StaticContentComponent .\n  OPTIONAL { ?staticContentComponent dct:title ?staticContentComponentTitle . }\n  ?staticContentComponent cvkd:hasHtmlContent ?htmlContent .\n  OPTIONAL { ?staticContentComponent cvkc:width ?width . }\n  OPTIONAL { ?staticContentComponent cvkc:height ?height . }\n  OPTIONAL { ?staticContentComponent cvkc:position ?position . }\n}\n`; // Allows to retrieve the IRI of the materialisation(s) on which\n// an interaction has its outcome\n// when the selection strategy is FollowPropertyPath\n\nconst makeQueryInteractionFollowPropertyPathForTarget = (iriMaterialisation, propertyPathToFollow, targetedPortrayalOrPortrayalRule) => `\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix ion: <http://lig-tdcge.imag.fr/steamer/covikoa/interaction#>\n\nSELECT (GROUP_CONCAT(?mat2;separator=\";\") as ?materialisations)\nWHERE {\n ?ir gviz:hasMaterialisation <${iriMaterialisation}> .\n ?ir gviz:represents ?indiv .\n ?indiv ${propertyPathToFollow} ?otherEntity .\n ?otherEntity ^(gviz:represents) ?ir2 .\n ?ir2 gviz:hasMaterialisation ?mat2 .\n {\n    ?mat2 cvkd:fromPortrayalRule <${targetedPortrayalOrPortrayalRule}> .\n  } UNION {\n    ?mat2 cvkd:fromPortrayalRule/(^gviz:hasPortrayalRule) <${targetedPortrayalOrPortrayalRule}> .\n  }\n} GROUP BY ?indiv\n`;\nconst makeQueryInteractionFollowPropertyPathForRest = (iriMaterialisation, propertyPathToFollow, targetedPortrayalOrPortrayalRule) => `\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix ion: <http://lig-tdcge.imag.fr/steamer/covikoa/interaction#>\n\nSELECT (GROUP_CONCAT(?mat2;separator=\";\") as ?materialisations)\nWHERE {\n ?ir gviz:hasMaterialisation <${iriMaterialisation}> .\n ?ir gviz:represents ?indiv .\n ?indiv ${propertyPathToFollow} ?otherEntity .\n ?otherEntity ^(gviz:represents) ?ir2 .\n ?ir2 gviz:hasMaterialisation ?mat2 .\n {\n    ?mat2 cvkd:fromPortrayalRule <${targetedPortrayalOrPortrayalRule}> .\n  } UNION {\n    ?mat2 cvkd:fromPortrayalRule/(^gviz:hasPortrayalRule) <${targetedPortrayalOrPortrayalRule}> .\n  }\n  {\n    ?otherMaterialisation cvkd:fromPortrayalRule <${targetedPortrayalOrPortrayalRule}> .\n  } UNION {\n    <${targetedPortrayalOrPortrayalRule}> gviz:hasPortrayalRule ?otherPortrayalRule .\n    ?otherMaterialisation cvkd:fromPortrayalRule ?otherPortrayalRule .\n  }\n  FILTER(?otherMaterialisation != ?mat2)\n} GROUP BY ?indiv\n`; // Allows to retrieve the IRI of the materialisation(s) on which\n// an interaction has its outcome\n// when the selection strategy is SameIndividual\n\nconst makeQueryInteractionSameIndividualForTarget = (iriMaterialisation, targetedPortrayalOrPortrayalRule) => `\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix ion: <http://lig-tdcge.imag.fr/steamer/covikoa/interaction#>\n\nSELECT ?materialisations WHERE {\n  ?ir gviz:hasMaterialisation <${iriMaterialisation}> .\n  ?ir gviz:represents ?indiv .\n  ?indiv ^(gviz:represents)/gviz:hasMaterialisation ?materialisations .\n  {\n    ?materialisations cvkd:fromPortrayalRule <${targetedPortrayalOrPortrayalRule}> .\n  } UNION {\n    ?materialisations cvkd:fromPortrayalRule/(^gviz:hasPortrayalRule) <${targetedPortrayalOrPortrayalRule}> .\n  }\n}\n`;\nconst makeQueryInteractionSameIndividualForRest = (iriMaterialisation, targetedPortrayalOrPortrayalRule) => `\nprefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nprefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nprefix cvkd: <http://lig-tdcge.imag.fr/steamer/covikoa/derivation#>\nprefix gviz: <http://lig-tdcge.imag.fr/steamer/covikoa/geoviz#>\nprefix ion: <http://lig-tdcge.imag.fr/steamer/covikoa/interaction#>\n\nSELECT (GROUP_CONCAT(?otherMaterialisation;separator=\";\") as ?materialisations) WHERE {\n  ?ir gviz:hasMaterialisation <${iriMaterialisation}> .\n  ?ir gviz:represents ?indiv .\n  ?indiv ^(gviz:represents)/gviz:hasMaterialisation ?materialisation .\n  {\n    ?materialisation cvkd:fromPortrayalRule <${targetedPortrayalOrPortrayalRule}> .\n  } UNION {\n    ?materialisation cvkd:fromPortrayalRule/(^gviz:hasPortrayalRule) <${targetedPortrayalOrPortrayalRule}> .\n  }\n  {\n    ?otherMaterialisation cvkd:fromPortrayalRule <${targetedPortrayalOrPortrayalRule}> .\n  } UNION {\n    <${targetedPortrayalOrPortrayalRule}> gviz:hasPortrayalRule ?otherPortrayalRule .\n    ?otherMaterialisation cvkd:fromPortrayalRule ?otherPortrayalRule .\n  }\n  FILTER(?otherMaterialisation != ?materialisation)\n}\n`; // Query the SPARQL endpoint and get the deserialized result\n\nconst reqQuery = (url, content) => fetch(url, {\n  method: 'POST',\n  body: `query=${encodeURIComponent(content)}`,\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  },\n  mode: 'no-cors'\n}).then(res => res.json());\nconst reqUpdate = (url, content) => fetch(url, {\n  method: 'POST',\n  body: `update=${encodeURIComponent(content)}`,\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  },\n  mode: 'no-cors'\n}).then(res => res.text());\n\n//# sourceURL=webpack:///./src/js/queries.js?");

/***/ }),

/***/ "./src/js/utils/map.js":
/*!*****************************!*\
  !*** ./src/js/utils/map.js ***!
  \*****************************/
/*! exports provided: getZoomLevelFromScale, getResolutionFromZoomLevel, handleMapSynchronisation, makeMapLayersAndPortrayals, prepareDefaultMapInteractions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getZoomLevelFromScale\", function() { return getZoomLevelFromScale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getResolutionFromZoomLevel\", function() { return getResolutionFromZoomLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleMapSynchronisation\", function() { return handleMapSynchronisation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeMapLayersAndPortrayals\", function() { return makeMapLayersAndPortrayals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"prepareDefaultMapInteractions\", function() { return prepareDefaultMapInteractions; });\n/* harmony import */ var ol_layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/layer */ \"./node_modules/ol/layer.js\");\n/* harmony import */ var ol_source__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/source */ \"./node_modules/ol/source.js\");\n/* harmony import */ var ol_ext_interaction_Synchronize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol-ext/interaction/Synchronize */ \"./node_modules/ol-ext/interaction/Synchronize.js\");\n/* harmony import */ var ol_interaction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/interaction */ \"./node_modules/ol/interaction.js\");\n/* harmony import */ var ol_View__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/View */ \"./node_modules/ol/View.js\");\n/* harmony import */ var _ol_style__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ol-style */ \"./src/js/utils/ol-style.js\");\n/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../consts */ \"./src/js/consts.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers */ \"./src/js/helpers.js\");\n/* harmony import */ var _portrayalConversion__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./portrayalConversion */ \"./src/js/utils/portrayalConversion.js\");\n// import Attribution from 'ol/control/Attribution';\n\n\n\n\n\n\n\n\n\n/**\n * Convert scale denominator to zoom level, using definitions and methodology from\n * https://docs.geoserver.org/latest/en/user/styling/ysld/reference/scalezoom.html.\n *\n * @param scaleDenominator\n * @returns {number}\n */\n\nconst getZoomLevelFromScale = scaleDenominator => {\n  const scale0 = 559082264;\n  if (scaleDenominator > 559082264) return 0;\n  let s = scale0;\n  let i = 0;\n\n  while (true) {\n    if (scaleDenominator < s && scaleDenominator > s / 2) {\n      const high = s;\n      const low = s / 2;\n      const r = Math.abs(scaleDenominator - high) / (high - low);\n      return i + r;\n    }\n\n    i += 1;\n    s /= 2;\n  }\n};\n/**\n * Get resolution value from zoom level\n * (used for Style function that depends on resolution\n *  while the user specified this using a zoom level).\n *\n * @param {number} z - The zoom level\n * @returns {number} The corresponding resolution\n */\n\nconst getResolutionFromZoomLevel = z => {\n  const max_resolution = new ol_View__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n    center: [0, 0],\n    zoom: 5\n  }).getMaxResolution();\n  return max_resolution / 2 ** z;\n};\n/**\n * Synchronize the `ol.Map`s between the various `mapWidgets`\n * according to what is described in `componentsDescription`.\n *\n * @param mapWidgets\n * @param componentsDescription\n * @returns {void}\n */\n\nconst handleMapSynchronisation = (mapWidgets, componentsDescription) => {\n  for (let i = 0; i < mapWidgets.length; i++) {\n    const map1 = mapWidgets[i].olMap;\n    const iriMap1 = map1.getTarget().getAttribute('iri');\n    const descriptionMap1 = componentsDescription.find(el => el.iri === iriMap1);\n\n    if (descriptionMap1.linkedTo) {\n      const iriOtherMaps = descriptionMap1.linkedTo;\n      mapWidgets.forEach(_mapWidget => {\n        const map2 = _mapWidget.olMap;\n\n        if (iriOtherMaps.indexOf(map2.getTarget().getAttribute('iri')) > -1) {\n          map1.addInteraction(new ol_ext_interaction_Synchronize__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n            maps: [map2]\n          }));\n        }\n      });\n    }\n  }\n}; // TODO: this very much spaggethi code for now and some part should be factorised\n\nconst makeMapLayersAndPortrayals = (res_list, mapWidget) => {\n  // We want to build an array containing all the necessary informations\n  // to create the corresponding OL VectorLayers\n  const portrayals = Object(_portrayalConversion__WEBPACK_IMPORTED_MODULE_8__[\"buildPortrayalsArray\"])(res_list); // The idea is to have, for each component, a mapping\n  // idMaterialisation -> feature\n  // so that we can quickly get the feature / entity\n  // to be modified when an interaction needs it\n  // (we use the same mechanism on TerrainWidget).\n\n  const materialisationMapping = {};\n  portrayals.forEach(portr => {\n    // Read the array of geometries, in wkt\n    const features = portr.geometries.map(geom => _helpers__WEBPACK_IMPORTED_MODULE_7__[\"wktFormat\"].readFeature(geom.replace('<http://www.opengis.net/def/crs/EPSG/0/4326> ', ''), {\n      dataProjection: 'EPSG:4326',\n      featureProjection: 'EPSG:3857'\n    })); // Store various internal information as properties on the ol features\n\n    features.forEach((ft, i) => {\n      // Set the id of each ol features as the id of\n      // its corresponding materialisation\n      ft.setId(portr.materialisations[i]); // Does it allow interactions, and on which events ?\n\n      if (portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#singleClick']) {\n        ft.setProperties({\n          _allowsSingleClick: portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#singleClick']\n        });\n      }\n\n      if (portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#mouseOver']) {\n        ft.setProperties({\n          _allowsMouseOver: portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#mouseOver']\n        });\n      }\n\n      if (portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#doubleClick']) {\n        ft.setProperties({\n          _allowsDoubleClick: portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#doubleClick']\n        });\n      }\n\n      if (portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#contextMenu']) {\n        ft.setProperties({\n          _allowsContextMenu: portr.interactionEvents['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#contextMenu']\n        });\n      } // The iri of the individual from the SDM\n\n\n      ft.setProperties({\n        _idTargetIndividual: portr.idsIndiv[i]\n      }); // The iri of the gviz:GeoVisualIntermediateRepresentation\n\n      ft.setProperties({\n        _idIntermediateRepresentation: portr.idsIntermediateRepresentation[i]\n      });\n      materialisationMapping[portr.materialisations[i]] = ft;\n    });\n    let layer;\n\n    if (portr.symbolizer) {\n      // One symbolizer (Ol style / style function) for the group of features\n      const style = Object(_ol_style__WEBPACK_IMPORTED_MODULE_5__[\"makeStyleFnOrStyleObject\"])(portr.symbolizer, portr.scaleRange);\n      features.forEach(ft => {\n        ft.setStyle(style);\n      });\n      layer = new ol_layer__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"]({\n        source: new ol_source__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"]({\n          features\n        })\n      }); // const style = makeStyleFnOrStyleObject(portr.symbolizer, portr.scaleRange);\n      // layer = new VectorLayer({\n      //   source: new VectorSource({ features }),\n      //   style,\n      // });\n    } else {\n      // One symbolizer (Ol style / style function) for each feature in the group\n      features.forEach((ft, i) => {\n        const style = Object(_ol_style__WEBPACK_IMPORTED_MODULE_5__[\"makeStyleFnOrStyleObject\"])(portr.symbolizers[i], portr.scaleRange);\n        ft.setStyle(style);\n      }); // If we have a punctual symbolisation (maybe of type Proportionnal Symbols)\n      // we order the features from the larger symbol to the smaller\n      // so that large symbols dont hide small symbols.\n\n      if (portr.symbolizers[0].type === 'PointSymbolizer' && portr.symbolizers[0].specJSON.indexOf('Mark') > -1) {\n        let startZIndex = 0; // sort the features from the largest to the smallest ...\n\n        features.sort((a, b) => b.getStyle().image_.getSize()[0] - a.getStyle().image_.getSize()[0]);\n        features.forEach(ft => {\n          // eslint-disable-next-line no-param-reassign,no-plusplus\n          ft.style_.zIndex_ = ++startZIndex;\n        });\n      }\n\n      layer = new ol_layer__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"]({\n        source: new ol_source__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"]({\n          features\n        })\n      });\n    } // Set the zIndex for the layer if specified\n\n\n    if (portr.zIndex) {\n      layer.setZIndex(portr.zIndex);\n    } // The mapping idMaterialisation -> ol.Feature\n\n\n    mapWidget.setMaterialisationMapping(materialisationMapping); // Finally add the layer to the map\n\n    mapWidget.olMap.addLayer(layer);\n  });\n  return portrayals;\n};\n/**\n *\n * @param deactivatedInteractions\n * @returns {Collection<import(\"./interaction/Interaction.js\").default>}\n */\n\nconst prepareDefaultMapInteractions = deactivatedInteractions => {\n  if (!deactivatedInteractions) {\n    return Object(ol_interaction__WEBPACK_IMPORTED_MODULE_3__[\"defaults\"])();\n  }\n\n  const o = {};\n  deactivatedInteractions.forEach(k => {\n    if (k === 'panning') {\n      o.dragPan = false;\n    } else if (k === 'zooming') {\n      o.doubleClickZoom = false;\n      o.mouseWheelZoom = false;\n      o.pinchZoom = false;\n      o.shiftDragZoom = false;\n    } else if (k === 'rotating') {\n      o.pinchRotate = false;\n      o.altShiftDragRotate = false;\n    }\n  });\n  return Object(ol_interaction__WEBPACK_IMPORTED_MODULE_3__[\"defaults\"])(o);\n};\n\n//# sourceURL=webpack:///./src/js/utils/map.js?");

/***/ }),

/***/ "./src/js/utils/og-style.js":
/*!**********************************!*\
  !*** ./src/js/utils/og-style.js ***!
  \**********************************/
/*! exports provided: makeStyle, parseRgbaColor, parseRgbaColor4v */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeStyle\", function() { return makeStyle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseRgbaColor\", function() { return parseRgbaColor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseRgbaColor4v\", function() { return parseRgbaColor4v; });\n/**\n *\n * @param {object} symbolizer\n * @returns {object}\n */\nconst makeStyle = symbolizer => {\n  const style = {};\n\n  if (symbolizer.kind === 'Line') {\n    style.strokeColor = symbolizer.color;\n    style.strokeWidth = symbolizer.width;\n  } else if (symbolizer.kind === 'Fill') {\n    style.lineColor = symbolizer.outlineColor;\n    style.lineWidth = symbolizer.outlineWidth;\n    style.fillColor = symbolizer.color;\n  }\n\n  return style;\n};\n/**\n * Convert a rgb/rgba css color value to an array of four components (r, g, b and a),\n * with possibly r, g and b normalized between 0 and 1.\n *\n * @param rgbaString - The color value as rgb or rgba.\n * @param normalize - Whether to normalize the value between 0-1.\n * @returns {number[]} An array of four numerical values (r, g, b and a).\n */\n\nconst parseRgbaColor = (rgbaString, normalize = true) => {\n  // Input string is expected to strart with \"rgb\" or \"rgba\"\n  if (!rgbaString.startsWith('rgb')) throw new Error('Error parsing rgb/rgba string'); // Match all the numerical value and cast them to number\n\n  let arr = rgbaString.match(/[.\\d]+/g).map(a => +a); // 3 or 4 values are expected\n\n  if (arr.length < 3 || arr.length > 4) throw new Error('Error parsing rgb/rgba string');\n\n  if (normalize) {\n    arr = [].concat(arr.slice(0, 3).map(c => c / 255), arr.slice(3, 4));\n  }\n\n  if (arr.length === 3) {\n    arr.push(1);\n  }\n\n  return arr;\n};\n/**\n *\n * @param {String} rgbaString - The rgb(a) string to parse and transform to an object\n * @returns {{w: number, x: number, y: number, z: number}} - The color description on a format\n *                                                   suitable for openglobus colors\n *                                                   setter postfixed with 4v (setFillColor4v, etc.)\n */\n\nconst parseRgbaColor4v = rgbaString => {\n  const rgbaArray = parseRgbaColor(rgbaString);\n  return {\n    x: rgbaArray[0],\n    y: rgbaArray[1],\n    z: rgbaArray[2],\n    w: rgbaArray[3]\n  };\n}; // export const getModifiedOgStyle = (oldStyle, typeGeom, modifiers) => {\n//\n//   modifiers.forEach(({ property, value }) => {\n//     if (typeGeom.indexOf('Polygon') > -1 || typeGeom.indexOf('Line')) {\n//       if (property.indexOf('strokeColor') > -1) {\n//         newStyle.getStroke().setColor(value);\n//       } else if (property.indexOf('strokeWidth') > -1) {\n//         newStyle.getStroke().setWidth(value);\n//       } else if (property.indexOf('fillColor') > -1) {\n//         newStyle.getFill().setColor(value);\n//       }\n//     }\n//   });\n//   return newStyle;\n// };\n\n//# sourceURL=webpack:///./src/js/utils/og-style.js?");

/***/ }),

/***/ "./src/js/utils/ol-style.js":
/*!**********************************!*\
  !*** ./src/js/utils/ol-style.js ***!
  \**********************************/
/*! exports provided: noStyle, makeStyle, makeStyleFnOrStyleObject, getModifiedOlStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"noStyle\", function() { return noStyle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeStyle\", function() { return makeStyle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeStyleFnOrStyleObject\", function() { return makeStyleFnOrStyleObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getModifiedOlStyle\", function() { return getModifiedOlStyle; });\n/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/style */ \"./node_modules/ol/style.js\");\n/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./map */ \"./src/js/utils/map.js\");\n\n\nconst noStyle = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Style\"]({\n  fill: new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Fill\"]({\n    color: 'rgba(0,0,0,0)'\n  }),\n  stroke: new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Stroke\"]({\n    color: 'rgba(0,0,0,0)'\n  })\n});\n/**\n * Given an Object containing the graphic in geostyler(-like) vocabulary,\n * build the corresponding style object.\n *\n * @param {object} s - An object containing a description of a symbolizer\n * @returns {ol.style.Style} The corresponding openlayers style\n */\n\nconst makeStyle = s => {\n  let inner_style = {};\n  const specJSON = JSON.parse(s.specJSON);\n\n  if (s.type === 'PointSymbolizer') {\n    if (specJSON.kind === 'Mark') {\n      // Fill\n      const inner_fill_style = {};\n      inner_fill_style.color = specJSON.color;\n      inner_style.fill = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Fill\"](inner_fill_style); // Stroke\n\n      const inner_stroke_style = {};\n      inner_stroke_style.color = specJSON.strokeColor;\n      inner_stroke_style.width = specJSON.strokeWidth; // inner_stroke_style.lineDash = specJSON.strokeDashArray;\n      // inner_stroke_style.lineDashOffset = specJSON.strokeDashOffset;\n\n      inner_style.stroke = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Stroke\"](inner_stroke_style); // Radius / size:\n\n      inner_style.radius = specJSON.radius;\n\n      if (specJSON.wellKnownName === 'circle') {\n        inner_style = {\n          image: new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Circle\"](inner_style)\n        };\n      } else if (specJSON.wellKnownName === 'square') {\n        // TODO : add the other shapes\n        inner_style = {\n          image: new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"RegularShape\"]({\n            fill: inner_style.fill,\n            stroke: inner_style.stroke,\n            points: 4,\n            radius: 10,\n            angle: Math.PI / 4\n          })\n        };\n      }\n    } else if (specJSON.kind === 'Icon') {\n      inner_style.image = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Icon\"]({\n        src: specJSON.image,\n        size: specJSON.size,\n        anchor: [0.5, 0.5],\n        anchorXUnits: 'fraction',\n        anchorYUnits: 'fraction'\n      });\n    }\n  } else if (s.type === 'LineSymbolizer') {\n    const inner_stroke_style = {};\n    inner_stroke_style.color = specJSON.color;\n    inner_stroke_style.width = specJSON.width;\n    inner_stroke_style.lineDash = specJSON.dashArray;\n    inner_stroke_style.lineDashOffset = specJSON.dashOffset ? +specJSON.dashOffset : undefined;\n    inner_style.stroke = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Stroke\"](inner_stroke_style);\n  } else if (s.type === 'PolygonSymbolizer') {\n    inner_style.fill = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Fill\"]({\n      color: specJSON.color\n    });\n\n    if (specJSON.outlineColor || specJSON.outlineWidth) {\n      const inner_stroke_style = {};\n      inner_stroke_style.color = specJSON.outlineColor;\n      inner_stroke_style.width = specJSON.outlineWidth;\n      inner_style.stroke = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Stroke\"](inner_stroke_style);\n    }\n  } else if (s.type === 'TextSymbolizer') {\n    // Build the value for 'font' field\n    const font = specJSON.font ? specJSON.font[0] : 'Arial, Verdana, Helvetica, sans-serif';\n    const weight = specJSON.weight ? specJSON.weight : 'normal';\n    const size = specJSON.size ? `${specJSON.size}px` : '12px';\n    const fontValue = [weight, size, font].join(' '); // Build the value for 'fill' field\n\n    const fillValue = specJSON.color ? new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Fill\"]({\n      color: specJSON.color\n    }) : undefined; // Build the value for 'stroke' field\n\n    const outlineColor = specJSON.haloColor;\n    const outlineWidth = specJSON.haloWidth;\n    const strokeValue = outlineColor && outlineWidth ? new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Stroke\"]({\n      color: outlineColor,\n      width: outlineWidth\n    }) : undefined;\n    inner_style.text = new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Text\"]({\n      font: fontValue,\n      fill: fillValue,\n      text: specJSON.label,\n      stroke: strokeValue\n    });\n  } else {\n    throw new Error('CompositeSymbolizer are not currently supported');\n  }\n\n  return new ol_style__WEBPACK_IMPORTED_MODULE_0__[\"Style\"](inner_style);\n};\n/**\n * Given an Object containing the graphic in geostyler(-like) vocabulary\n * and a range of zoom level validity, build the corresponding style object or function.\n *\n * @param {object} symbolizer - An object containing a description of a symbolizer\n * @param {number[]} scaleRange - An array containing the range of validity of the symbolizer\n *                             (expressed in zoom level, like [1, 8])\n * @returns {ol.style.Style | function} The corresponding openlayers style function or style object\n */\n\nconst makeStyleFnOrStyleObject = (symbolizer, scaleRange) => {\n  const styleObject = makeStyle(symbolizer);\n  return scaleRange === undefined ? styleObject : (ft, resolution) => {\n    if (resolution < Object(_map__WEBPACK_IMPORTED_MODULE_1__[\"getResolutionFromZoomLevel\"])(scaleRange[0]) // TODO: use the Ol.view builtin function\n    && resolution > Object(_map__WEBPACK_IMPORTED_MODULE_1__[\"getResolutionFromZoomLevel\"])(scaleRange[1]) // that allows to do that\n    ) {\n        return styleObject;\n      }\n\n    return null;\n  };\n};\n/**\n * Compute the new ol Style based on an array of modifiers (ion:hasSymbolizerModifier).\n *\n * @param {ol.style.Style} oldStyle - The style to be modified\n * @param {string} typeGeom - The type of the geometry\n * @param {object[]} modifiers - Array of modifiers (object with 'value' and 'property' keys)\n * @returns {ol.style.Style}\n */\n\nconst getModifiedOlStyle = (oldStyle, typeGeom, modifiers) => {\n  const newStyle = oldStyle.clone();\n  modifiers.forEach(({\n    property,\n    value\n  }) => {\n    // TODO many more cases to be handled\n    if (typeGeom.indexOf('Polygon') > -1 || typeGeom.indexOf('Line')) {\n      if (property.indexOf('strokeColor') > -1) {\n        newStyle.getStroke().setColor(value);\n      } else if (property.indexOf('strokeWidth') > -1) {\n        newStyle.getStroke().setWidth(value);\n      } else if (property.indexOf('fillColor') > -1) {\n        newStyle.getFill().setColor(value);\n      }\n    }\n  });\n  return newStyle;\n};\n\n//# sourceURL=webpack:///./src/js/utils/ol-style.js?");

/***/ }),

/***/ "./src/js/utils/portrayalConversion.js":
/*!*********************************************!*\
  !*** ./src/js/utils/portrayalConversion.js ***!
  \*********************************************/
/*! exports provided: buildPortrayalsArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"buildPortrayalsArray\", function() { return buildPortrayalsArray; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers */ \"./src/js/helpers.js\");\n/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../consts */ \"./src/js/consts.js\");\n/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ \"./src/js/utils/map.js\");\n\n\n\nconst buildPortrayalsArray = res_list => {\n  const portrayals = []; // Extract reference to each portrayalRule (this is the id of a bnode but we dont care)\n\n  const portrayalRules = new Set(res_list.map(e => e.portrayalRule.value)); // Actually build the `portrayals` array, one item for each PortrayalRule\n  // The portrayals Array will also be used if a legend is requested ...\n\n  portrayalRules.forEach(ruleId => {\n    const res_item = {\n      iriPortrayal: null,\n      iriPortrayalRule: null,\n      labelPortrayal: null,\n      geometries: [],\n      idsIntermediateRepresentation: [],\n      idsIndiv: [],\n      materialisations: [],\n      interactionEvents: {},\n      symbolizer: null,\n      // One symbolizer object for all the group\n      symbolizers: [] // .. or an array of symbolizers, in same order than geoms/ids/etc.\n\n    };\n    const groupFeatures = res_list.filter(e => e.portrayalRule.value === ruleId); // Maybe only one group or maybe multiple\n    // (depending on if the feature share a symbolizer, such as for a choropleth map,\n    //  or not, such as for a Proportionnal symbol map)\n\n    if (groupFeatures.length === 1) {\n      const group = groupFeatures[0];\n      console.log(group);\n      const displayIndex = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'displayIndex', null);\n      const minValidScale = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'minScale', null);\n      const maxValidScale = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'maxScale', null);\n      const minValidZoomLevel = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'minZoomLevel', null);\n      const maxValidZoomLevel = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'maxZoomLevel', null);\n      const geoms = group.geoms.value.split(';');\n      const nbFeature = geoms.length; // All the geometries for this group of features inside this portrayalRule\n\n      res_item.geometries.push(...geoms); // Ids of the intermediate representation\n\n      res_item.idsIntermediateRepresentation.push(...group.gvrs.value.split(';')); // Ids of the actual individual\n\n      res_item.idsIndiv.push(...group.indivs.value.split(';')); // Ids of the materialisation\n\n      res_item.materialisations.push(...group.materialisations.value.split(';')); // Some metadata\n\n      res_item.iriPortrayal = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'portrayal', null);\n      res_item.labelPortrayal = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'labelPortrayal', null);\n      res_item.iriPortrayalRule = ruleId; // Compute the z-index from the displayIndex if any\n\n      if (displayIndex) {\n        res_item.zIndex = 1001 - +displayIndex;\n      } // Handle the scale value if any\n\n\n      if (minValidZoomLevel !== null && maxValidZoomLevel !== null) {\n        res_item.scaleRange = [minValidZoomLevel, maxValidZoomLevel];\n      } else if (minValidScale !== null && maxValidScale !== null) {\n        res_item.scaleRange = [Object(_map__WEBPACK_IMPORTED_MODULE_2__[\"getZoomLevelFromScale\"])(minValidScale), Object(_map__WEBPACK_IMPORTED_MODULE_2__[\"getZoomLevelFromScale\"])(maxValidScale)];\n      } // Each feature or group of feature can now be matched with its symboliser\n      // (which describes the graphic properties to use: fill, stroke, etc.)\n\n\n      const nameSymbolizer = group.symbolizer.value;\n      const type_symbolizer = group.typeSymbolizer.value.replace(_consts__WEBPACK_IMPORTED_MODULE_1__[\"NS_SYMBOLIZER\"], '');\n      const hasInteraction = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'interaction', false);\n\n      if (hasInteraction) {\n        const interactions = JSON.parse(hasInteraction);\n        interactions.forEach(interaction => {\n          res_item.interactionEvents[interaction.event] = interaction.interaction; // eslint-disable-next-line no-param-reassign\n\n          interaction['onPortrayal'] = res_item.iriPortrayal; // Store the interaction\n\n          global.State.interactions[interaction.interaction] = interaction;\n        });\n      }\n\n      res_item.symbolizer = {\n        type: type_symbolizer,\n        name: nameSymbolizer,\n        specJSON: group.propJson.value\n      };\n    } else {\n      groupFeatures.forEach(group => {\n        const displayIndex = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'displayIndex', null);\n        const minValidScale = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'minScale', null);\n        const maxValidScale = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'maxScale', null);\n        const minValidZoomLevel = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'minZoomLevel', null);\n        const maxValidZoomLevel = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'maxZoomLevel', null);\n        const geoms = group.geoms.value.split(';');\n        const nbFeature = geoms.length; // All the geometries for this group of features inside this portrayalRule\n\n        res_item.geometries.push(...geoms); // Ids of the intermediate representation\n\n        res_item.idsIntermediateRepresentation.push(...group.gvrs.value.split(';')); // Ids of the actual individual\n\n        res_item.idsIndiv.push(...group.indivs.value.split(';')); // Ids of the materialisation\n\n        res_item.materialisations.push(...group.materialisations.value.split(';')); // Some metadata\n\n        res_item.iriPortrayal = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'portrayal', null);\n        res_item.labelPortrayal = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'labelPortrayal', null);\n        res_item.iriPortrayalRule = ruleId; // Compute the z-index from the displayIndex if any\n\n        if (displayIndex) {\n          res_item.zIndex = 1001 - +displayIndex;\n        } // Handle the scale value if any\n\n\n        if (minValidZoomLevel !== null && maxValidZoomLevel !== null) {\n          res_item.scaleRange = [minValidZoomLevel, maxValidZoomLevel];\n        } else if (minValidScale !== null && maxValidScale !== null) {\n          res_item.scaleRange = [Object(_map__WEBPACK_IMPORTED_MODULE_2__[\"getZoomLevelFromScale\"])(minValidScale), Object(_map__WEBPACK_IMPORTED_MODULE_2__[\"getZoomLevelFromScale\"])(maxValidScale)];\n        } // Each feature or group of feature can now be matched with its symboliser\n        // (which describes the graphic properties to use: fill, stroke, etc.)\n\n\n        const nameSymbolizer = group.symbolizer.value;\n        const type_symbolizer = group.typeSymbolizer.value.replace(_consts__WEBPACK_IMPORTED_MODULE_1__[\"NS_SYMBOLIZER\"], '');\n        const hasInteraction = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"getValue\"])(group, 'interaction', false);\n\n        if (hasInteraction) {\n          const interactions = JSON.parse(hasInteraction);\n          interactions.forEach(interaction => {\n            res_item.interactionEvents[interaction.event] = interaction.interaction; // eslint-disable-next-line no-param-reassign\n\n            interaction['onPortrayal'] = res_item.iriPortrayal; // TODO: store these interaction at the level of the component\n            //         (so we might need to handle that latter in the code)\n\n            global.State.interactions[interaction.interaction] = interaction;\n          });\n        }\n\n        for (let i = 0; i < nbFeature; i++) {\n          res_item.symbolizers.push({\n            type: type_symbolizer,\n            name: nameSymbolizer,\n            specJSON: group.propJson.value\n          });\n        }\n      });\n    }\n\n    portrayals.push(res_item);\n  });\n  return portrayals;\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./src/js/utils/portrayalConversion.js?");

/***/ }),

/***/ "./src/js/utils/terrain-entity.js":
/*!****************************************!*\
  !*** ./src/js/utils/terrain-entity.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _openglobus_og__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openglobus/og */ \"./node_modules/@openglobus/og/src/og/index.js\");\n\n/**\n * The idea is to extend openglobus Entity with a few methods so that we can operate\n * on them the same way we operate on openlayers Feature\n * (in some extent, mostly in interaction.js in order to test these features for equality\n * based on their materialisation ID, and in order to get the properties related to\n * interaction).\n */\n\n/**\n *\n * @returns {String} - The IRI of the materialisation represented by this openglobus Entity\n */\n\n_openglobus_og__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"].prototype.getId = function _ogEntityGetId() {\n  return this._materialisationId;\n};\n/**\n *\n * @param key - The key of the property to retrieve\n * @returns {*}\n */\n\n\n_openglobus_og__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"].prototype.get = function _ogEntityGet(key) {\n  return this.properties[key];\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_openglobus_og__WEBPACK_IMPORTED_MODULE_0__[\"Entity\"]);\n\n//# sourceURL=webpack:///./src/js/utils/terrain-entity.js?");

/***/ }),

/***/ "./src/js/utils/terrain.js":
/*!*********************************!*\
  !*** ./src/js/utils/terrain.js ***!
  \*********************************/
/*! exports provided: makeTerrainLayersAndPortrayals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeTerrainLayersAndPortrayals\", function() { return makeTerrainLayersAndPortrayals; });\n/* harmony import */ var _openglobus_og__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openglobus/og */ \"./node_modules/@openglobus/og/src/og/index.js\");\n/* harmony import */ var wellknown__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wellknown */ \"./node_modules/wellknown/index.js\");\n/* harmony import */ var wellknown__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(wellknown__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _terrain_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./terrain-entity */ \"./src/js/utils/terrain-entity.js\");\n/* harmony import */ var _og_style__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./og-style */ \"./src/js/utils/og-style.js\");\n/* harmony import */ var _portrayalConversion__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./portrayalConversion */ \"./src/js/utils/portrayalConversion.js\");\n\n\n\n\n\nconst {\n  Vector\n} = _openglobus_og__WEBPACK_IMPORTED_MODULE_0__[\"layer\"];\n\nconst makePropertiesForInteractions = (interactionEvents, idTargetIndividual, idIR) => {\n  const props = {};\n  [['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#singleClick', '_allowsSingleClick'], ['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#mouseOver', '_allowsMouseOver'], ['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#doubleClick', '_allowsDoubleClick'], ['http://lig-tdcge.imag.fr/steamer/covikoa/interaction#contextMenu', '_allowsContextMenu']].forEach(([eventType, propName]) => {\n    if (interactionEvents[eventType]) props[propName] = interactionEvents[eventType];else props[propName] = '';\n  });\n  props._idTargetIndividual = idTargetIndividual;\n  props._idIntermediateRepresentation = idIR;\n  return props;\n};\n\nconst makeTerrainLayersAndPortrayals = (res_list, terrainWidget) => {\n  const portrayals = Object(_portrayalConversion__WEBPACK_IMPORTED_MODULE_4__[\"buildPortrayalsArray\"])(res_list); // The idea is to have, for each component, a mapping\n  // idMaterialisation -> feature\n  // so that we can quickly get the feature / entity\n  // to be modified when an interaction needs it\n  // (we use the same mechanism on MapWidget).\n\n  const materialisationMapping = {};\n  portrayals.forEach(portr => {\n    // TODO: use a better layer name (and use the same scheme for naming ol.Layers\n    const nameLayer = portr.iriPortrayal + portr.iriPortrayalRule;\n    const ogLayer = new Vector(nameLayer, {\n      visibility: true,\n      isBaseLayer: false,\n      pickingEnabled: true,\n      clampToGround: true,\n      ambient: [1, 1, 1],\n      // TODO: we should improve these values\n      diffuse: [0, 0, 0]\n    });\n    portr.geometries.forEach((geomWkt, i) => {\n      // Make the style from the description of the symbolizer\n      const symbolizer = portr.symbolizer || portr.symbolizers[i];\n      const style = Object(_og_style__WEBPACK_IMPORTED_MODULE_3__[\"makeStyle\"])(JSON.parse(symbolizer.specJSON)); // Make the geometry in geojson format (from the wkt retrieved)\n\n      const geomJson = wellknown__WEBPACK_IMPORTED_MODULE_1___default()(geomWkt.replace('<http://www.opengis.net/def/crs/EPSG/0/4326> ', ''));\n      geomJson.style = style; // Make the property object\n\n      const properties = makePropertiesForInteractions(portr.interactionEvents, portr.idsIndiv[i], portr.idsIntermediateRepresentation[i]); // Finally create the entity\n\n      const entity = new _terrain_entity__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        geometry: geomJson,\n        properties\n      }); // So that we can use \"getId\" to get the IRI of the materialisation,\n      // as on OpenLayers Features\n\n      entity._materialisationId = portr.materialisations[i]; // So that we can use xx.id_ in interaction.js\n      // without having to care whether it is an openlayers feature\n      // or an openglobus entity\n\n      entity.id_ = `og-${entity.id}`; // The mapping used for interaction, as on MapWidget\n\n      materialisationMapping[portr.materialisations[i]] = entity;\n      ogLayer.add(entity);\n    }); // Set the zIndex for the layer if specified\n\n    if (portr.zIndex) {\n      ogLayer.setZIndex(portr.zIndex);\n    } // The mapping idMaterialisation -> og.Entity\n\n\n    terrainWidget.setMaterialisationMapping(materialisationMapping); // Finally add the layer to the terrain view\n\n    ogLayer.addTo(terrainWidget.ogTerrain.planet);\n  });\n  return portrayals;\n};\n\n//# sourceURL=webpack:///./src/js/utils/terrain.js?");

/***/ }),

/***/ "./src/js/utils/widget.js":
/*!********************************!*\
  !*** ./src/js/utils/widget.js ***!
  \********************************/
/*! exports provided: getChildWidgets, getLastWidget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getChildWidgets\", function() { return getChildWidgets; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLastWidget\", function() { return getLastWidget; });\n/**\n * Get all child widgets of a DockPanel.\n *\n * @param {lumino.widgets.DockPanel|lumino.widgets.BoxPanel} panel - The DockPanel or BoxPanel to extract widgets from\n * @returns {array}\n */\nconst getChildWidgets = panel => {\n  if (typeof panel.widgets === 'object') return panel.widgets;\n  let w;\n  const r = [];\n  const it = panel.widgets();\n\n  while (w = it.next()) {\n    r.push(w);\n  }\n\n  return r;\n};\n/**\n * Get the widget that was added the last on a DockPanel.\n *\n * @param {lumino.widgets.DockPanel} panel - The DockPanel to extract widget from\n * @returns {lumino.widgets.Widget|undefined}\n */\n\nconst getLastWidget = panel => {\n  const widgets = getChildWidgets(panel);\n  return widgets[widgets.length - 1];\n};\n\n//# sourceURL=webpack:///./src/js/utils/widget.js?");

/***/ }),

/***/ "./src/js/widgets/contentWidget.js":
/*!*****************************************!*\
  !*** ./src/js/widgets/contentWidget.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ContentWidget; });\n/* harmony import */ var _lumino_widgets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lumino/widgets */ \"./node_modules/@lumino/widgets/dist/index.es6.js\");\n/* harmony import */ var _css_contentWidget_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../css/contentWidget.css */ \"./src/css/contentWidget.css\");\n/* harmony import */ var _css_contentWidget_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_contentWidget_css__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/*\n* Widget displaying some other (mostly static) content\n* in the interface (that corresponds to a gviz:StaticContentComponent)\n*\n*/\n\nclass ContentWidget extends _lumino_widgets__WEBPACK_IMPORTED_MODULE_0__[\"Widget\"] {\n  // static createNode() {\n  //   const node = document.createElement('div');\n  //   const content = document.createElement('div');\n  //   const input = document.createElement('input');\n  //   input.placeholder = 'Placeholder...';\n  //   content.appendChild(input);\n  //   node.appendChild(content);\n  //   return node;\n  // }\n  constructor(options) {\n    // super({ node: ContentWidget.createNode() });\n    super();\n    this.setFlag(_lumino_widgets__WEBPACK_IMPORTED_MODULE_0__[\"Widget\"].Flag.DisallowLayout);\n    this.addClass('cvk-ContentWidget');\n    this.title.label = options.title;\n    this.title.closable = true;\n    this.title.caption = `Long description for: ${options.name}`;\n    const elem = document.createElement('div');\n    elem.innerHTML = options.content; //   elem.innerHTML = `<div>\n    //   <h2 style=\"margin-bottom: 0\">Woo title</h2>\n    //   <div style=\"display: flex;\">\n    //     <div style=\"flex-basis: 50%;\">\n    //       <p style=\"font-size:26px;\">🚀🌝</p>\n    //     </div>\n    //     <div style=\"flex-basis: 50%;\">\n    //       <p>Made by MyUserName (c) 2021</p>\n    //       <p><i>Some html content fetched dynamically by a SPARQL query ...</i><p>\n    //     </div>\n    //   </div>\n    // </div>`;\n\n    this.node.append(elem);\n  } // get inputNode() {\n  //   return this.node.getElementsByTagName('input')[0];\n  // }\n  //\n  // onActivateRequest(_msg) { // eslint-disable-line no-unused-vars\n  //   if (this.isAttached) {\n  //     this.inputNode.focus();\n  //   }\n  // }\n\n\n}\n\n//# sourceURL=webpack:///./src/js/widgets/contentWidget.js?");

/***/ }),

/***/ "./src/js/widgets/mapWidgetOpenLayers.js":
/*!***********************************************!*\
  !*** ./src/js/widgets/mapWidgetOpenLayers.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MapWidgetOpenLayers; });\n/* harmony import */ var _css_mapWidget_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../css/mapWidget.css */ \"./src/css/mapWidget.css\");\n/* harmony import */ var _css_mapWidget_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_mapWidget_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ol_Map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Map */ \"./node_modules/ol/Map.js\");\n/* harmony import */ var ol_View__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/View */ \"./node_modules/ol/View.js\");\n/* harmony import */ var _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lumino/widgets */ \"./node_modules/@lumino/widgets/dist/index.es6.js\");\n/* harmony import */ var ol_layer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer */ \"./node_modules/ol/layer.js\");\n/* harmony import */ var ol_source__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/source */ \"./node_modules/ol/source.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../helpers */ \"./src/js/helpers.js\");\n/* harmony import */ var _utils_map__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/map */ \"./src/js/utils/map.js\");\n\n\n\n // import { Attribution } from 'ol/control';\n\n\n\n\n\n/**\n * Widget containing the OpenLayers map and corresponding to a gviz:Map2dComponent.\n * (a to do thing is to create a generic MapWidget then and extend it to a\n *  MapWidgetOpenLayers and a MapWidgetLeaflet for example)\n *\n */\n\nclass MapWidgetOpenLayers extends _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__[\"Widget\"] {\n  static createNode() {\n    return document.createElement('div');\n  }\n\n  constructor(params) {\n    super({\n      node: MapWidgetOpenLayers.createNode()\n    }); // this.id = options.id;\n\n    this.addClass('cvk-MapWidget'); // this.addClass('active');\n\n    this.title.label = params.title;\n    this.title.closable = false;\n    this.timeoutHandle = null;\n    this.params = params;\n  }\n\n  onAfterAttach(msg) {\n    // eslint-disable-line no-unused-vars\n    this._create_ol_map();\n\n    this.update();\n  }\n\n  onResize(msg) {\n    // eslint-disable-line no-unused-vars\n    if (!this.isAttached) return;\n\n    if (this.timeoutHandle) {\n      clearTimeout(this.timeoutHandle);\n    }\n\n    this.timeoutHandle = setTimeout(() => {\n      this.olMap.updateSize();\n      this.timeoutHandle = null;\n    }, 10); // Maybe we dont need any timeout after all...\n  }\n\n  processMessage(msg) {\n    // eslint-disable-line no-unused-vars\n    super.processMessage(msg);\n\n    if (msg.type === 'all-widgets-attached') {\n      this.onAllWidgetsAttached(msg);\n    }\n  }\n\n  _create_ol_map() {\n    const params = this.params; // eslint-disable-line prefer-destructuring\n\n    const mapElement = document.createElement('div');\n    mapElement.classList.add('ol-map');\n    this.node.appendChild(mapElement);\n    this.mapElement = mapElement; // TODO: maybe we should set this attribute on the parent node\n    //       (as on other widgets)\n\n    mapElement.setAttribute('iri', params.iri);\n    let baseMapLayer;\n\n    if (params.options.basemapTemplateUrl && params.options.basemapAttribution) {\n      baseMapLayer = new ol_layer__WEBPACK_IMPORTED_MODULE_4__[\"Tile\"]({\n        source: new ol_source__WEBPACK_IMPORTED_MODULE_5__[\"XYZ\"]({\n          url: params.options.basemapTemplateUrl,\n          attributions: [params.options.basemapAttribution]\n        })\n      });\n    }\n\n    const view = new ol_View__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n      center: [0, 0],\n      zoom: 5\n    });\n\n    if (params.options.constrainedScale) {\n      if (params.options.constrainedScale.type === 'zoom') {\n        view.setMaxZoom(params.options.constrainedScale.max);\n        view.setMinZoom(params.options.constrainedScale.min);\n      } else if (params.options.constrainedScale.type === 'scaleDenominator') {\n        view.setMaxZoom(Object(_utils_map__WEBPACK_IMPORTED_MODULE_7__[\"getZoomLevelFromScale\"])(params.options.constrainedScale.max));\n        view.setMinZoom(Object(_utils_map__WEBPACK_IMPORTED_MODULE_7__[\"getZoomLevelFromScale\"])(params.options.constrainedScale.min));\n      }\n    }\n\n    if (this._paramsHasExtent()) {\n      // Fit extent before attaching the view to the map,\n      // it will center the view but not zoom on it\n      // We will re-do this when all the widgets\n      // will have there real size (but because there is\n      // some delay, its nice to have the view centered first...)\n      this.fitExtentFromParams(view);\n    } // Prepare the interactions with the map (zooming, panning, etc.)\n    // because they are all activated by default\n    // but maybe the user choosed to deactivate some of them.\n\n\n    const interactions = Object(_utils_map__WEBPACK_IMPORTED_MODULE_7__[\"prepareDefaultMapInteractions\"])(params.options.deactivatedInteractions);\n    this.olMap = new ol_Map__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      interactions,\n      layers: baseMapLayer ? [baseMapLayer] : undefined,\n      target: mapElement,\n      view\n    });\n  }\n\n  _paramsHasExtent() {\n    return !!this.params.options.geomInitialExtent;\n  }\n\n  fitExtentFromParams(view) {\n    const _view = view || this.olMap.getView(); // Compute the zoom and the center from `params.geomInitialExtent`,\n    // if existing, which is the expected WKT extent .\n\n\n    const feature = _helpers__WEBPACK_IMPORTED_MODULE_6__[\"wktFormat\"].readFeature(this.params.options.geomInitialExtent, {\n      dataProjection: 'EPSG:4326',\n      featureProjection: 'EPSG:3857'\n    });\n    const geom = feature.getGeometry();\n\n    _view.fit(geom);\n  }\n\n  onAllWidgetsAttached(msg) {\n    // eslint-disable-line no-unused-vars\n    // Fit extent if required\n    if (this._paramsHasExtent()) {\n      setTimeout(() => {\n        this.fitExtentFromParams();\n      }, 125);\n    } // Create the overlay layer\n\n\n    this.overlayLayer = new ol_layer__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"]({\n      source: new ol_source__WEBPACK_IMPORTED_MODULE_5__[\"Vector\"](),\n      map: this.olMap,\n      properties: {\n        isOverlay: true\n      }\n    });\n  }\n\n  getOverlayLayer() {\n    return this.overlayLayer;\n  }\n\n  setMaxSize() {\n    if (this.params.width) {\n      this.node.style.maxWidth = `${this.params.width}px`;\n    }\n\n    if (this.params.height) {\n      this.node.style.maxHeight = `${this.params.height}px`;\n    }\n  }\n\n  setMaterialisationMapping(mapping) {\n    this.materialisationMapping = mapping;\n  }\n\n}\n\n//# sourceURL=webpack:///./src/js/widgets/mapWidgetOpenLayers.js?");

/***/ }),

/***/ "./src/js/widgets/tableWidget.js":
/*!***************************************!*\
  !*** ./src/js/widgets/tableWidget.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TableWidget; });\n/* harmony import */ var _lumino_widgets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lumino/widgets */ \"./node_modules/@lumino/widgets/dist/index.es6.js\");\n/* harmony import */ var _lumino_datagrid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lumino/datagrid */ \"./node_modules/@lumino/datagrid/dist/index.es6.js\");\n/* harmony import */ var _customMouseHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../customMouseHandler */ \"./src/js/customMouseHandler.js\");\n\n\n\n/**\n * Widget containing a table, corresponding to gviz:TableComponent.\n *\n *\n */\n\nclass TableWidget extends _lumino_widgets__WEBPACK_IMPORTED_MODULE_0__[\"StackedPanel\"] {\n  constructor(options) {\n    super();\n    this.addClass('cvk-TableWidget');\n    const {\n      titleTable,\n      iriTable,\n      schemaAndData\n    } = options; // Iri (in the graph) of this widget\n\n    this.node.setAttribute('iri', iriTable); // Title of the tab in SplitPanel\n\n    this.title.label = titleTable; // Instantiate DataGrid based on our data\n\n    const model = new _lumino_datagrid__WEBPACK_IMPORTED_MODULE_1__[\"JSONModel\"](schemaAndData);\n    const grid = new _lumino_datagrid__WEBPACK_IMPORTED_MODULE_1__[\"DataGrid\"]({\n      style: { ..._lumino_datagrid__WEBPACK_IMPORTED_MODULE_1__[\"DataGrid\"].defaultStyle,\n        rowBackgroundColor: i => i % 2 === 0 ? 'rgba(64, 115, 53, 0.2)' : ''\n      },\n      defaultSizes: {\n        // TODO: Maybe compute width values based on the data ...\n        rowHeight: 32,\n        columnWidth: 96,\n        rowHeaderWidth: 128,\n        columnHeaderHeight: 32\n      }\n    });\n    grid.dataModel = model; // Key handler, such as 'esc' to deselect a line, etc.\n    // (we use the default key handler)\n\n    grid.keyHandler = new _lumino_datagrid__WEBPACK_IMPORTED_MODULE_1__[\"BasicKeyHandler\"](); // Mouse handler, we use a custom one\n    // in order to allow possible identify interactions\n\n    grid.mouseHandler = new _lumino_datagrid__WEBPACK_IMPORTED_MODULE_1__[\"BasicMouseHandler\"](); // new CustomMouseHandler(grid);\n    // The selection model, what is selected on click and so on\n\n    grid.selectionModel = new _lumino_datagrid__WEBPACK_IMPORTED_MODULE_1__[\"BasicSelectionModel\"]({\n      dataModel: model,\n      selectionMode: 'row'\n    });\n    this.addWidget(grid);\n  }\n\n}\n\n//# sourceURL=webpack:///./src/js/widgets/tableWidget.js?");

/***/ }),

/***/ "./src/js/widgets/terrainWidgetOpenglobus.js":
/*!***************************************************!*\
  !*** ./src/js/widgets/terrainWidgetOpenglobus.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TerrainWidgetOpenglobus; });\n/* harmony import */ var _css_mapWidget_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../css/mapWidget.css */ \"./src/css/mapWidget.css\");\n/* harmony import */ var _css_mapWidget_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_mapWidget_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _openglobus_og_css_og_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openglobus/og/css/og.css */ \"./node_modules/@openglobus/og/css/og.css\");\n/* harmony import */ var _openglobus_og_css_og_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_openglobus_og_css_og_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _openglobus_og__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @openglobus/og */ \"./node_modules/@openglobus/og/src/og/index.js\");\n/* harmony import */ var _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lumino/widgets */ \"./node_modules/@lumino/widgets/dist/index.es6.js\");\n/* harmony import */ var wellknown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wellknown */ \"./node_modules/wellknown/index.js\");\n/* harmony import */ var wellknown__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(wellknown__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers */ \"./src/js/helpers.js\");\n\n\n\n\n\n\nconst {\n  XYZ\n} = _openglobus_og__WEBPACK_IMPORTED_MODULE_2__[\"layer\"];\nconst {\n  GlobusTerrain\n} = _openglobus_og__WEBPACK_IMPORTED_MODULE_2__[\"terrain\"];\n/**\n * Widget containing the openglobus terrain and corresponding to a gviz:Map3dComponent.\n * (a to do thing is to create a generic TerrainWidget then and extend it to a\n *  TerrainWidgetOpenglobus and a TerrainWidgetItowns for example)\n *\n */\n\nclass TerrainWidgetOpenglobus extends _lumino_widgets__WEBPACK_IMPORTED_MODULE_3__[\"Widget\"] {\n  static createNode() {\n    return document.createElement('div');\n  }\n\n  constructor(params) {\n    super({\n      node: TerrainWidgetOpenglobus.createNode()\n    });\n    this.addClass('cvk-TerrainWidgetItowns');\n    this.title.label = params.title;\n    this.title.closable = false;\n    this.timeoutHandle = null;\n    this.params = params;\n  }\n\n  onAfterShow(msg) {\n    // eslint-disable-line no-unused-vars\n    console.log('onAfterShow');\n\n    this._create_terrain();\n  }\n\n  onAfterAttach(msg) {\n    // eslint-disable-line no-unused-vars\n    if (this.isVisible) {\n      console.log('onAfterAttach and visible');\n\n      this._create_terrain();\n    }\n  }\n\n  _onResize(msg) {//\n  }\n\n  processMessage(msg) {\n    super.processMessage(msg);\n\n    if (msg.type === 'all-widgets-attached') {\n      this.onAllWidgetsAttached(msg);\n    }\n  }\n\n  onAllWidgetsAttached(msg) {\n    if (this._paramsHasExtent()) {\n      setTimeout(() => {\n        this.fitExtentFromParams();\n      }, 225);\n    }\n  }\n\n  setMaterialisationMapping(mapping) {\n    this.materialisationMapping = mapping;\n  }\n\n  _create_terrain() {\n    const params = this.params; // eslint-disable-line prefer-destructuring\n\n    const viewerDiv = document.createElement('div');\n    viewerDiv.classList.add('og-terrain'); // TODO: maybe we should set this attribute on the parent node\n    //       (as on other widgets - cf MapWidget too)\n\n    viewerDiv.setAttribute('iri', params.iri);\n    viewerDiv.id = params.iri;\n    this.node.appendChild(viewerDiv);\n    let baseMapLayer;\n\n    if (params.options.basemapTemplateUrl && params.options.basemapAttribution) {\n      baseMapLayer = new XYZ('baseMapLayer', {\n        isBaseLayer: true,\n        url: params.options.basemapTemplateUrl,\n        attributions: params.options.basemapAttribution,\n        visibility: true,\n        pickingEnabled: false,\n        // this helps when handling pointer events in interaction.js\n        specular: [0.0003, 0.00012, 0.00001],\n        // TODO: lightning could be improved\n        shininess: 10,\n        diffuse: [0.89, 0.9, 0.83]\n      });\n    }\n\n    this.ogTerrain = new _openglobus_og__WEBPACK_IMPORTED_MODULE_2__[\"Globe\"]({\n      target: viewerDiv.id,\n      name: 'Earth',\n      terrain: new GlobusTerrain(),\n      layers: baseMapLayer ? [baseMapLayer] : undefined,\n      autoActivated: true,\n      viewExtent: [5.56707, 45.15679, 5.88834, 45.22260]\n    });\n    this.ogTerrain.planet.setRatioLod(1.8); // openglobus defaults to 1.12 apparently\n    // Define onResize function now the terrain view is setted up\n    // (with little delai to ensure it)\n\n    setTimeout(() => {\n      this.onResize = Object(_helpers__WEBPACK_IMPORTED_MODULE_5__[\"debounce\"])(this._onResize, 150);\n    }, 1000);\n  }\n\n  _paramsHasExtent() {\n    return !!this.params.options.geomInitialExtent;\n  }\n\n  fitExtentFromParams() {\n    const geomJson = wellknown__WEBPACK_IMPORTED_MODULE_4___default()(this.params.options.geomInitialExtent);\n    const extent = new _openglobus_og__WEBPACK_IMPORTED_MODULE_2__[\"Extent\"](new _openglobus_og__WEBPACK_IMPORTED_MODULE_2__[\"LonLat\"](180.0, 90.0), new _openglobus_og__WEBPACK_IMPORTED_MODULE_2__[\"LonLat\"](-180.0, -90.0));\n    geomJson.coordinates[0].forEach(c => {\n      const lon = c[0];\n      const lat = c[1];\n      if (lon < extent.southWest.lon) extent.southWest.lon = lon;\n      if (lat < extent.southWest.lat) extent.southWest.lat = lat;\n      if (lon > extent.northEast.lon) extent.northEast.lon = lon;\n      if (lat > extent.northEast.lat) extent.northEast.lat = lat;\n    });\n    this.ogTerrain.planet.flyExtent(extent);\n  }\n\n}\n\n//# sourceURL=webpack:///./src/js/widgets/terrainWidgetOpenglobus.js?");

/***/ }),

/***/ 0:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack:///crypto_(ignored)?");

/***/ })

/******/ });